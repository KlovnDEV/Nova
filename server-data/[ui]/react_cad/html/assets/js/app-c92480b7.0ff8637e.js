(()=>{"use strict";var Ie={530:(V,H,e)=>{e.d(H,{Z:()=>S});var t=e(22142),M=e(63193),v=e(11314),d=e(73642),r=e(53257),E=e(76358),a=e(42405);const u={Viewfinder:"Viewfinder___3EFoG",Frame:"Frame___2C5OM",Controls:"Controls___2_KEI",Button:"Button___2kaOr"};var le=(T,C,z)=>new Promise((ce,ue)=>{var o=b=>{try{f(z.next(b))}catch(h){ue(h)}},l=b=>{try{f(z.throw(b))}catch(h){ue(h)}},f=b=>b.done?ce(b.value):Promise.resolve(b.value).then(o,l);f((z=z.apply(T,C)).next())});const J=()=>{const[T,C]=(0,t.useState)(!0),z=()=>le(void 0,null,function*(){C(!1),yield(0,a._v)(100),a.bl.query("takePhotoEnd",{photo:!0,url:"http://46.188.28.129:7070/image/upload"}).then(ue=>{E.Z.onPhotoHandler(ue.data)}),yield(0,a._v)(100),E.Z.photoMode=!1}),ce=()=>{a.bl.query("takePhotoEnd",{}),E.Z.photoMode=!1};return t.createElement("div",{className:u.Viewfinder},t.createElement(r.Z,{className:u.Frame,style:{opacity:T?1:0}}),t.createElement("div",{className:u.Controls},t.createElement("button",{type:"button",onClick:z,className:u.Button},"\u0421\u043D\u044F\u0442\u044C"),t.createElement("button",{type:"button",onClick:ce,className:u.Button},"\u0417\u0430\u043A\u0440\u044B\u0442\u044C")))},_=(0,v.Pi)(J),Z=(0,v.Pi)(J);var U=e(43118),y=e(12397);const R={frame:"frame___3FUrB",screen:"screen___DC9MN"},O=()=>{const T=(0,M.k6)();return(0,t.useEffect)(()=>{(0,a.bi)(C=>{if(C.showMenu!==void 0&&(C.showMenu===!0?(E.Z.shown=!0,C.homepage&&(E.Z.Homepage=C.homepage,T.push(C.homepage)),C.permissions&&(E.Z.permissions=C.permissions),C.tax&&(E.Z.tax=C.tax)):(T.push("/",{}),E.Z.shown=!1)),C.showMessage){const z=C.type;z==="error"?(0,a.vU)(C.text,C.timeout):z==="warn"?(0,a.ZK)(C.text,C.timeout):z==="success"?(0,a.Vp)(C.text,C.timeout):(0,a.um)(C.text,C.timeout)}})},[T])},ne=null;var D=e(15018),$=Object.defineProperty,P=Object.prototype.hasOwnProperty,A=Object.getOwnPropertySymbols,F=Object.prototype.propertyIsEnumerable,G=(T,C,z)=>C in T?$(T,C,{enumerable:!0,configurable:!0,writable:!0,value:z}):T[C]=z,Y=(T,C)=>{for(var z in C||(C={}))P.call(C,z)&&G(T,z,C[z]);if(A)for(var z of A(C))F.call(C,z)&&G(T,z,C[z]);return T};const Q=(0,t.lazy)(()=>Promise.all([e.e(531),e.e(130),e.e(904),e.e(323),e.e(379),e.e(529),e.e(982),e.e(190),e.e(285),e.e(677),e.e(685),e.e(898),e.e(753),e.e(182),e.e(105),e.e(400),e.e(118),e.e(11),e.e(707),e.e(716),e.e(205),e.e(475),e.e(567),e.e(581),e.e(208),e.e(103),e.e(315),e.e(221),e.e(732),e.e(47),e.e(663),e.e(255),e.e(641),e.e(692),e.e(640),e.e(484),e.e(949),e.e(413),e.e(618),e.e(591)]).then(e.bind(e,90972))),k=(0,t.lazy)(()=>Promise.all([e.e(531),e.e(130),e.e(904),e.e(323),e.e(379),e.e(529),e.e(982),e.e(190),e.e(285),e.e(677),e.e(685),e.e(898),e.e(753),e.e(182),e.e(105),e.e(400),e.e(118),e.e(11),e.e(707),e.e(716),e.e(205),e.e(475),e.e(567),e.e(581),e.e(208),e.e(103),e.e(315),e.e(221),e.e(732),e.e(47),e.e(663),e.e(255),e.e(641),e.e(692),e.e(640),e.e(484),e.e(949),e.e(413),e.e(618),e.e(591)]).then(e.bind(e,35958))),I=(0,t.lazy)(()=>Promise.all([e.e(531),e.e(130),e.e(904),e.e(323),e.e(379),e.e(529),e.e(982),e.e(190),e.e(285),e.e(677),e.e(685),e.e(898),e.e(753),e.e(182),e.e(105),e.e(400),e.e(118),e.e(11),e.e(707),e.e(716),e.e(205),e.e(475),e.e(567),e.e(581),e.e(208),e.e(103),e.e(315),e.e(221),e.e(732),e.e(47),e.e(663),e.e(255),e.e(641),e.e(692),e.e(640),e.e(484),e.e(949),e.e(413),e.e(618),e.e(591)]).then(e.bind(e,90137))),x=(0,t.lazy)(()=>Promise.all([e.e(531),e.e(130),e.e(904),e.e(323),e.e(379),e.e(529),e.e(982),e.e(190),e.e(285),e.e(677),e.e(685),e.e(898),e.e(753),e.e(182),e.e(105),e.e(400),e.e(118),e.e(11),e.e(707),e.e(716),e.e(205),e.e(475),e.e(567),e.e(581),e.e(208),e.e(103),e.e(315),e.e(221),e.e(732),e.e(47),e.e(663),e.e(255),e.e(641),e.e(692),e.e(640),e.e(484),e.e(949),e.e(413),e.e(618),e.e(591)]).then(e.bind(e,6681))),N=(0,t.lazy)(()=>Promise.all([e.e(531),e.e(130),e.e(904),e.e(323),e.e(379),e.e(529),e.e(982),e.e(190),e.e(285),e.e(677),e.e(685),e.e(898),e.e(753),e.e(182),e.e(105),e.e(400),e.e(118),e.e(11),e.e(707),e.e(716),e.e(205),e.e(475),e.e(567),e.e(581),e.e(208),e.e(103),e.e(315),e.e(221),e.e(732),e.e(47),e.e(663),e.e(255),e.e(641),e.e(692),e.e(640),e.e(484),e.e(949),e.e(413),e.e(618),e.e(591)]).then(e.bind(e,31899))),p=(0,t.lazy)(()=>Promise.all([e.e(531),e.e(130),e.e(904),e.e(323),e.e(379),e.e(529),e.e(982),e.e(190),e.e(285),e.e(677),e.e(685),e.e(898),e.e(753),e.e(182),e.e(105),e.e(400),e.e(118),e.e(11),e.e(707),e.e(716),e.e(205),e.e(475),e.e(567),e.e(581),e.e(208),e.e(103),e.e(315),e.e(221),e.e(732),e.e(47),e.e(663),e.e(255),e.e(641),e.e(692),e.e(640),e.e(484),e.e(949),e.e(413),e.e(618),e.e(591)]).then(e.bind(e,60417))),ae=(0,t.lazy)(()=>Promise.all([e.e(531),e.e(130),e.e(904),e.e(323),e.e(379),e.e(529),e.e(982),e.e(190),e.e(285),e.e(677),e.e(685),e.e(898),e.e(753),e.e(182),e.e(105),e.e(400),e.e(118),e.e(11),e.e(707),e.e(716),e.e(205),e.e(475),e.e(567),e.e(581),e.e(208),e.e(103),e.e(315),e.e(221),e.e(732),e.e(47),e.e(663),e.e(255),e.e(641),e.e(692),e.e(640),e.e(484),e.e(949),e.e(413),e.e(618),e.e(591)]).then(e.bind(e,99084))),ie=(0,t.lazy)(()=>Promise.all([e.e(531),e.e(130),e.e(904),e.e(323),e.e(379),e.e(529),e.e(982),e.e(190),e.e(285),e.e(677),e.e(685),e.e(898),e.e(753),e.e(182),e.e(105),e.e(400),e.e(118),e.e(11),e.e(707),e.e(716),e.e(205),e.e(475),e.e(567),e.e(581),e.e(208),e.e(103),e.e(315),e.e(221),e.e(732),e.e(47),e.e(663),e.e(255),e.e(641),e.e(692),e.e(640),e.e(484),e.e(949),e.e(413),e.e(618),e.e(591)]).then(e.bind(e,1510))),Ee=(0,t.lazy)(()=>Promise.all([e.e(531),e.e(130),e.e(904),e.e(323),e.e(379),e.e(529),e.e(982),e.e(190),e.e(285),e.e(677),e.e(685),e.e(898),e.e(753),e.e(182),e.e(105),e.e(400),e.e(118),e.e(11),e.e(707),e.e(716),e.e(205),e.e(475),e.e(567),e.e(581),e.e(208),e.e(103),e.e(315),e.e(221),e.e(732),e.e(47),e.e(663),e.e(255),e.e(641),e.e(692),e.e(640),e.e(484),e.e(949),e.e(413),e.e(618),e.e(591)]).then(e.bind(e,45595))),K=(0,t.lazy)(()=>Promise.all([e.e(531),e.e(130),e.e(904),e.e(323),e.e(379),e.e(529),e.e(982),e.e(190),e.e(285),e.e(677),e.e(685),e.e(898),e.e(753),e.e(182),e.e(105),e.e(400),e.e(118),e.e(11),e.e(707),e.e(716),e.e(205),e.e(475),e.e(567),e.e(581),e.e(208),e.e(103),e.e(315),e.e(221),e.e(732),e.e(47),e.e(663),e.e(255),e.e(641),e.e(692),e.e(640),e.e(484),e.e(949),e.e(413),e.e(618),e.e(591)]).then(e.bind(e,98929))),B=()=>{let T;const C=[{exact:!0,path:"/",render:()=>t.createElement("div",null)},{exact:!0,path:"/:orgName/",render:z=>{const{match:{params:{orgName:ce}}}=z;return ce==="government"?t.createElement(t.Suspense,{fallback:t.createElement(D.c,null)},t.createElement(K,null)):t.createElement(t.Suspense,{fallback:t.createElement(D.c,null)},t.createElement(Ee,{orgName:T}))}},{exact:!0,path:"/:orgName/manage",render:({match:z,location:ce})=>{const{params:{id:ue,orgName:o}}=z,{pathname:l}=ce,f={id:ue,key:l,orgName:o};return t.createElement(t.Suspense,{fallback:t.createElement(D.c,null)},t.createElement(x,Y({},f)))}},{exact:!0,path:"/:orgName/tax",render:()=>t.createElement(t.Suspense,{fallback:t.createElement(D.c,null)},t.createElement(k,null))},{exact:!0,path:"/oil/stations",render:()=>t.createElement(t.Suspense,{fallback:t.createElement(D.c,null)},t.createElement(N,null))},{exact:!0,path:"/:orgName/record/:id",render:({match:z,location:ce})=>{const{params:{id:ue,orgName:o}}=z,{pathname:l}=ce,f={id:ue,key:l,organization:o};return t.createElement(t.Suspense,{fallback:t.createElement(D.c,null)},t.createElement(Q,Y({},f)))}},{exact:!0,path:"/:orgName/certificate/:id",render:({match:z,location:ce})=>{const{params:{id:ue,orgName:o}}=z,{pathname:l}=ce,f={id:ue,orgName:o,key:l};return t.createElement(t.Suspense,{fallback:t.createElement(D.c,null)},t.createElement(ie,Y({},f)))}},{exact:!0,path:"/:orgName/archive",render:({match:z,location:ce})=>{const{params:{orgName:ue}}=z,{pathname:o}=ce,l={organization:ue,archive:!0,key:o};return t.createElement(t.Suspense,{fallback:t.createElement(D.c,null)},t.createElement(ae,Y({},l)))}},{exact:!0,path:"/:orgName/cases",render:({match:z,location:ce})=>{const{params:{orgName:ue}}=z,{pathname:o}=ce,l={organization:ue,archive:!1,key:o};return t.createElement(t.Suspense,{fallback:t.createElement(D.c,null)},t.createElement(ae,Y({},l)))}},{exact:!0,path:"/:orgName/person/:personId",render:({match:z,location:ce})=>{const{params:{personId:ue,orgName:o}}=z;return t.createElement(t.Suspense,{fallback:t.createElement(D.c,null)},t.createElement(p,{id:ue,editable:!0,orgName:o,key:ce.pathname}))}},{exact:!0,path:"/:orgName/search/",render:({match:z,location:ce})=>t.createElement(t.Suspense,{fallback:t.createElement(D.c,null)},t.createElement(I,{orgName:z.params.orgName,key:ce.pathname}))}];return C.some(z=>{const ce=(0,M.$B)(z.path);if(!ce)return!1;const{params:{orgName:ue}}=ce;return ue?(T=ue,!0):!1}),{orgName:T,routes:C}},L=null;var q=Object.defineProperty,se=Object.prototype.hasOwnProperty,pe=Object.getOwnPropertySymbols,de=Object.prototype.propertyIsEnumerable,oe=(T,C,z)=>C in T?q(T,C,{enumerable:!0,configurable:!0,writable:!0,value:z}):T[C]=z,X=(T,C)=>{for(var z in C||(C={}))se.call(C,z)&&oe(T,z,C[z]);if(pe)for(var z of pe(C))de.call(C,z)&&oe(T,z,C[z]);return T};function c(){const{shown:T}=E.Z,{orgName:C,routes:z}=B();O();const ce=ue=>{E.Z.permissions=E.Z.permissionSets[ue.target.value]};return T?t.createElement(t.Fragment,null,t.createElement(y.xu,{flex:"column",style:{position:"absolute",left:10,bottom:10,zIndex:9999,backgroundColor:"white"}},Object.entries(E.Z.permissionSets).map(([ue,o])=>t.createElement("input",{type:"button",key:ue,value:ue,onClick:ce}))),t.createElement("div",{className:R.frame,style:{backgroundImage:"url(assets/img/monitor.png)",opacity:E.Z.photoMode?0:1}},t.createElement("main",{className:R.screen},t.createElement(U.Drawer,{orgName:C}),t.createElement(M.rs,null,z.map(ue=>t.createElement(M.AW,X({key:ue.path},ue)))),t.createElement(U.Snackbar,{open:E.Z.snackbar.open,text:E.Z.snackbar.text,category:E.Z.snackbar.category}))),E.Z.photoMode&&t.createElement(_,null)):null}const S=(0,v.Pi)(c)},99084:(V,H,e)=>{e.r(H),e.d(H,{Cases:()=>$,default:()=>P});var t=e(22142),M=e(11314),v=e(63193),d=e(35979),r=e.n(d),E=e(43118),a=e(68999),u=e(38481),le=e(42405),J=Object.defineProperty,_=Object.getOwnPropertyDescriptor,Z=(A,F,G,Y)=>{for(var Q=Y>1?void 0:Y?_(F,G):F,k=A.length-1,I;k>=0;k--)(I=A[k])&&(Q=(Y?I(F,G,Q):I(Q))||Q);return Y&&Q&&J(F,G,Q),Q};class U{constructor(){this.assets={},this.Cases=null,this.updateCases=(F,G)=>{this.assets.cases=le.bl.query("cad/record/list",{archived:F?1:0,organization:G}).then(Y=>(this.Cases=Y.data,Y))},(0,u.ky)(this)}}Z([u.LO],U.prototype,"assets",2),Z([u.LO],U.prototype,"Cases",2),Z([u.aD],U.prototype,"updateCases",2);const y=new U,R={Wrapper:"Wrapper___1aAgl",Grid:"Grid___3-MuN"},O=A=>A==="ambulance"?{[a.RecordCategoryAmbulance.Reception]:"\u041F\u0440\u0438\u0451\u043C",[a.RecordCategoryAmbulance.Certificate]:"\u0421\u043F\u0440\u0430\u0432\u043A\u0430",[a.RecordCategoryAmbulance.Surgery]:"\u041E\u043F\u0435\u0440\u0430\u0446\u0438\u044F"}:A==="police"?{[a.RecordCategoryPolice.Administrative]:"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043D\u043E\u0435",[a.RecordCategoryPolice.Criminal]:"\u0423\u0433\u043E\u043B\u043E\u0432\u043D\u043E\u0435"}:{},ne=({title:A,organization:F})=>{const G=(0,v.k6)();return t.createElement(r(),{style:{width:"100%"},title:A,columns:[{field:"id",hidden:!0,type:"numeric"},{title:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",field:"title"},{title:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",field:"category",type:"numeric",align:"left",lookup:O(F)},{title:"\u041E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439",field:"responsible"},{title:"\u0414\u0430\u0442\u0430",field:"date",type:"date"}],data:y.Cases,options:{draggable:!1,pageSize:18,pageSizeOptions:[18],thirdSortClick:!1,padding:"dense"},onRowClick:(Y,Q)=>G.push(`/${F}/record/${Q.id}`)})},D=({archive:A,organization:F})=>{const G=(0,v.k6)();(0,t.useEffect)(()=>{y.updateCases(A,F)},[A,F]);const Y=()=>A?"\u0410\u0440\u0445\u0438\u0432":!A&&F==="ambulance"?"\u0422\u0435\u043A\u0443\u0449\u0438\u0435 \u0434\u0435\u043B\u0430":!A&&F==="police"?"\u0421\u043F\u0438\u0441\u043E\u043A \u0434\u0435\u043B":"";return t.createElement("div",{className:R.Wrapper},t.createElement(E.Card,{header:Y(),flex:"column top left"},t.createElement(E.Preloader,{event:y.assets.cases,success:ne,title:Y(),organization:F})))},$=(0,M.Pi)(D),P=(0,M.Pi)(D)},1510:(V,H,e)=>{e.r(H),e.d(H,{Certificate:()=>je,default:()=>_e});var t=e(22142),M=e(11314),v=e(43118),d=e(12397),r=e(42405),E=e(76358),a=e(68999);const u={Wrapper:"Wrapper___37K4E",Grid:"Grid___-vxgc",CertificateRow:"CertificateRow___b4NhR",CertificateRowEqual:"CertificateRowEqual___2O8Ck",CertificateRowSingle:"CertificateRowSingle___1mEzU",CertificateRowCheckboxes:"CertificateRowCheckboxes___SGIVs",CertificateDescr:"CertificateDescr___2Wyq8",Checkbox:"Checkbox___3D4Qm",Textarea:"Textarea___17OIJ",Button:"Button___3TLsI"};var le=Object.defineProperty,J=Object.prototype.hasOwnProperty,_=Object.getOwnPropertySymbols,Z=Object.prototype.propertyIsEnumerable,U=(g,n,i)=>n in g?le(g,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[n]=i,y=(g,n)=>{for(var i in n||(n={}))J.call(n,i)&&U(g,i,n[i]);if(_)for(var i of _(n))Z.call(n,i)&&U(g,i,n[i]);return g};const R=g=>{const{name:n,label:i,State:fe,licenseType:re}=g;return t.createElement("label",{className:u.Checkbox,htmlFor:n},t.createElement("input",{type:"checkbox",name:n,checked:!!fe.IDCard[re][n],onChange:Pe=>{fe.IDCard[re]=y(y({},fe.IDCard[re]),{[n]:Pe.target.checked})}}),i)},O=({State:g,editable:n,onPhoto:i})=>{const fe=(0,r.FM)(g.IDCard,(re,Pe)=>Pe);return t.createElement(t.Fragment,null,t.createElement("div",{className:u.CertificateRowEqual},t.createElement(d.nv,y({variant:"outlined",fullWidth:!0,label:"\u0418\u043C\u044F"},fe("firstname",!n))),t.createElement(d.nv,y({variant:"outlined",fullWidth:!0,label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"},fe("lastname",!n)))),t.createElement("div",{className:u.CertificateRowEqual},t.createElement(d.Ph,y({name:"sex",options:[{label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u043E\u043B",value:-1,hidden:!0},{label:"\u041C",value:0},{label:"\u0416",value:1}]},fe("sex",!n))),t.createElement(d.nv,y({variant:"outlined",fullWidth:!0,label:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442"},fe("age",!n)))),t.createElement("div",{className:u.CertificateRowSingle},t.createElement("span",null,"\u0412\u043E\u0434\u0438\u0442\u0435\u043B\u044C\u0441\u043A\u0438\u0435 \u043B\u0438\u0446\u0435\u043D\u0437\u0438\u0438:")),t.createElement("div",{className:u.CertificateRowCheckboxes},t.createElement(R,{licenseType:"drivingLicenses",name:"car",label:"\u041B\u0435\u0433\u043A\u043E\u0432\u043E\u0439 \u0430\u0432\u0442\u043E\u043C\u043E\u0431\u0438\u043B\u044C",State:g}),t.createElement(R,{licenseType:"drivingLicenses",name:"moto",label:"\u041C\u043E\u0442\u043E\u0446\u0438\u043A\u043B",State:g}),t.createElement(R,{licenseType:"drivingLicenses",name:"heli",label:"\u0412\u0435\u0440\u0442\u043E\u043B\u0435\u0442",State:g}),t.createElement(R,{licenseType:"drivingLicenses",name:"plane",label:"\u0421\u0430\u043C\u043E\u043B\u0435\u0442",State:g}),t.createElement(R,{licenseType:"drivingLicenses",name:"boat",label:"\u041B\u043E\u0434\u043A\u0430",State:g})),t.createElement("div",{className:u.CertificateRowSingle},t.createElement("span",null,"\u041B\u0438\u0446\u0435\u043D\u0437\u0438\u0438 \u043D\u0430 \u043E\u0440\u0443\u0436\u0438\u0435:")),t.createElement("div",{className:u.CertificateRowCheckboxes},t.createElement(R,{licenseType:"weaponLicenses",name:"pistol",label:"\u041F\u0438\u0441\u0442\u043E\u043B\u0435\u0442\u044B",State:g}),t.createElement(R,{licenseType:"weaponLicenses",name:"rifle",label:"\u0412\u0438\u043D\u0442\u043E\u0432\u043A\u0438",State:g}),t.createElement(R,{licenseType:"weaponLicenses",name:"heavy",label:"\u0422\u044F\u0436\u0435\u043B\u043E\u0435 \u043E\u0440\u0443\u0436\u0438\u0435",State:g}),t.createElement(R,{licenseType:"weaponLicenses",name:"melee",label:"\u0425\u043E\u043B\u043E\u0434\u043D\u043E\u0435 \u043E\u0440\u0443\u0436\u0438\u0435",State:g})),t.createElement("div",{className:u.CertificateRow},t.createElement("button",{type:"button",className:u.Button,onClick:()=>{E.Z.photoMode=!0,E.Z.onPhotoHandler=i,r.bl.query("takePhotoStart",{})}},"\u0421\u0434\u0435\u043B\u0430\u0442\u044C \u0444\u043E\u0442\u043E")))},ne=(0,M.Pi)(O),D=(0,M.Pi)(O);var $=Object.defineProperty,P=Object.prototype.hasOwnProperty,A=Object.getOwnPropertySymbols,F=Object.prototype.propertyIsEnumerable,G=(g,n,i)=>n in g?$(g,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[n]=i,Y=(g,n)=>{for(var i in n||(n={}))P.call(n,i)&&G(g,i,n[i]);if(A)for(var i of A(n))F.call(n,i)&&G(g,i,n[i]);return g};const Q=({State:g,editable:n})=>{const i=(0,r.FM)(g.PassKey,(fe,re)=>re);return t.createElement(t.Fragment,null,t.createElement("div",{className:u.CertificateRowEqual},t.createElement(d.nv,Y({variant:"outlined",fullWidth:!0,label:"\u0418\u043C\u044F"},i("firstname",!n))),t.createElement(d.nv,Y({variant:"outlined",fullWidth:!0,label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"},i("lastname",!n)))),t.createElement("div",{className:u.CertificateRowEqual},t.createElement(d.Ph,Y({name:"sex",options:[{label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0443\u0440\u043E\u0432\u0435\u043D\u044C \u0434\u043E\u0441\u0442\u0443\u043F\u0430",value:-1,hidden:!0},{label:"0",value:0},{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}]},i("grade",!n)))))},k=null;var I=Object.defineProperty,x=Object.prototype.hasOwnProperty,N=Object.getOwnPropertySymbols,p=Object.prototype.propertyIsEnumerable,ae=(g,n,i)=>n in g?I(g,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[n]=i,ie=(g,n)=>{for(var i in n||(n={}))x.call(n,i)&&ae(g,i,n[i]);if(N)for(var i of N(n))p.call(n,i)&&ae(g,i,n[i]);return g};const Ee=({State:g,editable:n})=>{const i=(0,r.FM)(g.Document,(fe,re)=>re);return t.createElement(t.Fragment,null,t.createElement("div",{className:u.CertificateRowEqual},t.createElement(d.nv,ie({variant:"outlined",fullWidth:!0,label:"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043E\u043A"},i("title",!n)))),t.createElement("div",{className:u.CertificateRowEqual},t.createElement(d.nv,ie({variant:"outlined",fullWidth:!0,label:"\u0418\u043C\u044F \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u044F"},i("firstname",!n))),t.createElement(d.nv,ie({variant:"outlined",fullWidth:!0,label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u044F"},i("lastname",!n)))),t.createElement("div",{className:u.CertificateRowSingle},t.createElement("textarea",ie({rows:16,className:u.Textarea},i("text",!n)))))},K=null;var B=Object.defineProperty,L=Object.prototype.hasOwnProperty,q=Object.getOwnPropertySymbols,se=Object.prototype.propertyIsEnumerable,pe=(g,n,i)=>n in g?B(g,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[n]=i,de=(g,n)=>{for(var i in n||(n={}))L.call(n,i)&&pe(g,i,n[i]);if(q)for(var i of q(n))se.call(n,i)&&pe(g,i,n[i]);return g};const oe=({State:g,editable:n})=>{const i=(0,r.FM)(g.Fine,(fe,re)=>re);return t.createElement(t.Fragment,null,t.createElement("div",{className:u.CertificateRowEqual},t.createElement(d.nv,de({variant:"outlined",fullWidth:!0,label:"\u0418\u043C\u044F \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u044F"},i("firstname",!n))),t.createElement(d.nv,de({variant:"outlined",fullWidth:!0,label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F \u043F\u043E\u043B\u0443\u0447\u0430\u0442\u0435\u043B\u044F"},i("lastname",!n)))),t.createElement("div",{className:u.CertificateRowEqual},t.createElement(d.nv,de({variant:"outlined",fullWidth:!0,label:"\u0421\u0443\u043C\u043C\u0430 \u0448\u0442\u0440\u0430\u0444\u0430"},i("fineAmount",!n))),t.createElement(d.Ph,{name:"lawId",options:[{label:"\u0421\u0442\u0430\u0442\u044C\u044F",value:-1,hidden:!0},{label:"0",value:0},{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}]})),t.createElement("div",{className:u.CertificateRowSingle},t.createElement("textarea",de({rows:16,className:u.Textarea},i("text",!n)))))},X=null,c={Body:"Body___2CfRA",Logo:"Logo___2gXou",Banner:"Banner___KJQa9",BannerBg:"BannerBg___MUo0j",BannerInner:"BannerInner___3jKoW",BannerDetails:"BannerDetails___2lSZw",Inner:"Inner____P5rK",Header:"Header___2w_66",Paragraph:"Paragraph___3XKkj",From:"From___263bI",To:"To___38zmf",Footer:"Footer___2O9zV",FooterLabel:"FooterLabel___YCr9H",FooterDescr:"FooterDescr___1ou3R",FooterRow:"FooterRow___vFz-8",Signature:"Signature___1BCgt"},S=g=>{const{title:n,author:i,firstname:fe,lastname:re,organization:Pe,text:Oe,date:De}=g,ye=(()=>{switch(Pe){case"police":return"Vinewood Hills Police Department";case"ambulance":return"Mount Zonah Medical Center";case"government":return"Los Santos Government";default:return" "}})(),Se=i.split(" ").pop();return t.createElement("div",{className:c.Body},t.createElement("div",{className:c.Banner},t.createElement("div",{className:c.BannerInner},t.createElement("img",{className:c.Logo,src:`assets/img/logo/${Pe}.png`,alt:""}),t.createElement("div",{className:c.BannerDetails},t.createElement("p",{className:c.From},ye),t.createElement("p",{className:c.To},`${fe} ${re}`))),t.createElement("img",{className:c.BannerBg,src:`assets/img/logo/${Pe}-banner.png`,alt:""})),t.createElement("div",{className:c.Inner},t.createElement("h2",{className:c.Header},n),t.createElement("p",{className:c.Paragraph},Oe)),t.createElement("div",{className:c.Footer},t.createElement("div",{className:c.FooterRow},t.createElement("p",{className:c.FooterLabel},"\u0414\u0430\u0442\u0430"),t.createElement("p",{className:c.FooterDescr},De.toLocaleDateString())),t.createElement("div",{className:c.FooterRow},t.createElement("p",{className:c.FooterLabel},i),t.createElement("p",{className:c.Signature},Se))))},T=null,C={Body:"Body___2I-XO",Logo:"Logo___3ZA1S",Banner:"Banner___1sb4l",BannerBg:"BannerBg___c_SWG",BannerInner:"BannerInner___19Iki",BannerDetails:"BannerDetails___28Tiw",Inner:"Inner___1Z4F5",Header:"Header___1Ee7F",Paragraph:"Paragraph___3Tj9L",From:"From___2PeKl",To:"To___xr5-y",Row:"Row___183RT",RowFluid:"RowFluid___pdtOX",Footer:"Footer___2xc78",FooterLabel:"FooterLabel___2N_gk",FooterDescr:"FooterDescr___3fvQu",FooterRow:"FooterRow___23o_P",Signature:"Signature___2pBoG"};var z=e(51723).ConcatClasses;const ce=g=>{const{fineAmount:n,lawId:i,author:fe,firstname:re,lastname:Pe,date:Oe,text:De}=g,ye=fe.split(" ").pop();return t.createElement("div",{className:C.Body},t.createElement("div",{className:C.Banner},t.createElement("div",{className:C.BannerInner},t.createElement("img",{className:C.Logo,src:"assets/img/certs/passkey-police.png",alt:""}),t.createElement("div",{className:C.BannerDetails},t.createElement("p",{className:C.From},"Vinewood Hills Police Department"),t.createElement("p",{className:C.To},`${re} ${Pe}`)))),t.createElement("div",{className:C.Inner},t.createElement("h2",{className:C.Header},"\u0423\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u0435 \u043E \u0428\u0442\u0440\u0430\u0444\u0435"),t.createElement("div",{className:C.Row},t.createElement("p",{className:C.FooterLabel},"\u0414\u0430\u0442\u0430"),t.createElement("p",{className:C.FooterDescr},Oe.toLocaleDateString())),t.createElement("div",{className:C.Row},t.createElement("p",{className:C.FooterLabel},"\u0421\u0443\u043C\u043C\u0430 \u0448\u0442\u0440\u0430\u0444\u0430"),t.createElement("p",{className:C.FooterDescr},n)),t.createElement("div",{className:z(C.Row,C.RowFluid)},t.createElement("p",{className:C.FooterLabel},"\u041D\u0430\u0440\u0443\u0448\u0435\u043D\u0438\u0435 (\u0441\u0442\u0430\u0442\u044C\u044F)"),t.createElement("p",{className:C.FooterDescr},i)),t.createElement("div",{className:z(C.Row,C.RowFluid)},t.createElement("p",{className:C.FooterLabel},"\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F"),t.createElement("p",{className:C.FooterDescr},De))),t.createElement("div",{className:C.Footer},t.createElement("div",{className:C.FooterRow},t.createElement("p",{className:C.FooterLabel},fe),t.createElement("p",{className:C.Signature},ye))))},ue=null,o={Passport:"Passport___1486w",PassportBackground:"PassportBackground___3rtV7",PassportWrapper:"PassportWrapper___UaFNS",PassportInner:"PassportInner___3nA0g",PassportFace:"PassportFace___ZTVka",PassportInfo:"PassportInfo___EKdw1",PassportInfoRow:"PassportInfoRow___gAdj9",PassportInfoLabel:"PassportInfoLabel___1bAXM",PassportInfoDescr:"PassportInfoDescr___20l7e",PassportPhoto:"PassportPhoto___1Tvch",Header:"Header___3v6I5",Subheader:"Subheader___1pc7k",QR:"QR___VGPMI",Signature:"Signature___xYtHY"},l=g=>{const{firstname:n,lastname:i,age:fe,sex:re,photo:Pe,drivingLicenses:Oe,weaponLicenses:De}=g,ye=(et,tt)=>Object.entries(et).filter(([be,Ue])=>Ue).map(([be,Ue])=>tt[be]).join(", "),Se=ye(De,{pistol:"P",rifle:"R",melee:"M",heavy:"H"}),Ze=ye(Oe,{boat:"B",car:"C",moto:"M",heli:"H",plane:"A"});return t.createElement("div",{className:o.Passport,style:{fontSize:20}},t.createElement("img",{className:o.PassportBackground,src:"assets/img/certs/passport.png",alt:""}),t.createElement("img",{className:o.QR,src:"assets/img/qr-code.png",alt:""}),t.createElement("div",{className:o.PassportWrapper},t.createElement("h2",{className:o.Header},"\u0418\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u043E\u043D\u043D\u0430\u044F \u043A\u0430\u0440\u0442\u0430"),t.createElement("p",{className:o.Subheader},"\u0428\u0442\u0430\u0442 \u041B\u043E\u0441 \u0421\u0430\u043D\u0442\u043E\u0441"),t.createElement("div",{className:o.PassportInner},t.createElement("div",{className:o.PassportPhoto},t.createElement("img",{className:o.PassportFace,src:Pe,alt:""}),t.createElement("p",{className:o.Signature},i)),t.createElement("div",{className:o.PassportInfo},t.createElement("div",{className:o.PassportInfoRow},t.createElement("div",null,t.createElement("p",{className:o.PassportInfoLabel},"\u0418\u043C\u044F"),t.createElement("p",{className:o.PassportInfoDescr},n)),t.createElement("div",null,t.createElement("p",{className:o.PassportInfoLabel},"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"),t.createElement("p",{className:o.PassportInfoDescr},i))),t.createElement("div",{className:o.PassportInfoRow},t.createElement("div",null,t.createElement("p",{className:o.PassportInfoLabel},"\u0412\u043E\u0437\u0440\u0430\u0441\u0442"),t.createElement("p",{className:o.PassportInfoDescr},fe)),t.createElement("div",null,t.createElement("p",{className:o.PassportInfoLabel},"\u041F\u043E\u043B"),t.createElement("p",{className:o.PassportInfoDescr},re==1?"\u0416":"\u041C"))),t.createElement("div",{className:o.PassportInfoRow},t.createElement("div",null,t.createElement("p",{className:o.PassportInfoLabel},"\u041B\u0438\u0446\u0435\u043D\u0437\u0438\u0438")),t.createElement("div",null,Ze.length>0&&t.createElement("p",{className:o.PassportInfoDescr}," DL(",Ze,")"),Se.length>0&&t.createElement("p",{className:o.PassportInfoDescr}," FA(",Se,")")))))))},f={Passport:"Passport___3l9kK",PassportBackground:"PassportBackground___3Z0Y1",PassportWrapper:"PassportWrapper___39tIt",PassportInner:"PassportInner___1isTM",PassportFace:"PassportFace___24aUy",PassportInfo:"PassportInfo___3CCNC",PassportInfoNumber:"PassportInfoNumber___1p916",PassportInfoNumberWrapper:"PassportInfoNumberWrapper___3gac5",PassportInfoDescr:"PassportInfoDescr___2uKRD",PassportPhoto:"PassportPhoto___2IjKZ",PassportNoise:"PassportNoise___3Nsa-",Header:"Header___2fY-R",Subheader:"Subheader___Pau1W",QR:"QR___3MCu3","Variation-0":"Variation-0___cnpiB","Variation-1":"Variation-1___2kSJ1","Variation-2":"Variation-2___vEQLf","Variation-3":"Variation-3___3r7y5","Variation-4":"Variation-4___kO5VB"};var b=e(51723).ConcatClasses;const h=g=>{const{firstname:n,lastname:i,organization:fe,grade:re,id:Pe}=g,Oe=(()=>{switch(fe){case"police":return"VHPD";case"ambulance":return"MZMC";case"government":return"LS Gov";default:return" "}})(),De=Pe<0?"XXXXX":(0,r.Bu)(Pe,5);return t.createElement("div",{className:b(f.Passport,f[`Variation-${re}`]),style:{fontSize:20}},t.createElement("div",{className:f.PassportNoise,style:{background:"url(assets/img/certs/noise.png)"}}),t.createElement("img",{className:f.PassportBackground,src:`assets/img/certs/passkey-${fe}.png`,alt:""}),t.createElement("div",{className:f.PassportWrapper},t.createElement("h2",{className:f.Header},Oe),t.createElement("img",{className:f.QR,src:"assets/img/certs/chip.png",alt:""}),t.createElement("div",{className:f.PassportInner},t.createElement("div",{className:f.PassportInfo},t.createElement("p",{className:f.PassportInfoDescr},n," ",i),t.createElement("div",{className:f.PassportInfoNumberWrapper},t.createElement("p",{className:f.PassportInfoNumber},De),t.createElement("p",{className:f.PassportInfoDescr},re))))))};var s=e(38481),m=Object.defineProperty,W=Object.prototype.hasOwnProperty,j=Object.getOwnPropertySymbols,w=Object.prototype.propertyIsEnumerable,ge=(g,n,i)=>n in g?m(g,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[n]=i,me=(g,n)=>{for(var i in n||(n={}))W.call(n,i)&&ge(g,i,n[i]);if(j)for(var i of j(n))w.call(n,i)&&ge(g,i,n[i]);return g};function ee(){return{id:-2,firstname:"",lastname:"",date:new Date,expireDate:new Date,category:a.CertificateCategory.IDCard,author:"",isRevoked:!1}}function Ce(){return me(me({},ee()),{age:18,sex:0,photo:"assets/img/person.jpg",drivingLicenses:{},weaponLicenses:{}})}function Ae(){return me(me({},ee()),{organization:"police",text:"",title:"",category:a.CertificateCategory.Document,author:"L`e Broosh`Eagl`e"})}function Ne(){return me(me({},ee()),{role:"",organization:"police",category:a.CertificateCategory.PassKey,grade:0})}function Re(){return me(me({},ee()),{category:a.CertificateCategory.Fine,fineAmount:2e3,lawId:111,text:"",author:"L`e Broosh`Eagl`e"})}var xe=Object.defineProperty,he=Object.prototype.hasOwnProperty,Me=Object.getOwnPropertyDescriptor,He=Object.getOwnPropertySymbols,Ke=Object.prototype.propertyIsEnumerable,ze=(g,n,i)=>n in g?xe(g,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[n]=i,We=(g,n)=>{for(var i in n||(n={}))he.call(n,i)&&ze(g,i,n[i]);if(He)for(var i of He(n))Ke.call(n,i)&&ze(g,i,n[i]);return g},Fe=(g,n,i,fe)=>{for(var re=fe>1?void 0:fe?Me(n,i):n,Pe=g.length-1,Oe;Pe>=0;Pe--)(Oe=g[Pe])&&(re=(fe?Oe(n,i,re):Oe(re))||re);return fe&&re&&xe(n,i,re),re},Ge=(g,n,i)=>new Promise((fe,re)=>{var Pe=ye=>{try{De(i.next(ye))}catch(Se){re(Se)}},Oe=ye=>{try{De(i.throw(ye))}catch(Se){re(Se)}},De=ye=>ye.done?fe(ye.value):Promise.resolve(ye.value).then(Pe,Oe);De((i=i.apply(g,n)).next())});class Be{constructor(){this.assets={},this.CertificateData=null,this.IDCard=Ce(),this.Document=Ae(),this.PassKey=Ne(),this.Fine=Re(),this.fetchCertificate=n=>Ge(this,null,function*(){return n==-1?(this.CertificateData=We({},ee()),new Promise(i=>i(!0))):r.bl.query("certificates/get",{id:n}).then(i=>(this.CertificateData=We({},i.data[0]),i))}),this.updateCertificate=n=>{this.assets.certificate=this.fetchCertificate(n)},this.saveCertificate=()=>{r.bl.query("saveCertificate",this.CertificateData).then(()=>{(0,r.Vp)("\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E!")}).catch(n=>{(0,r.vU)(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F! ${n}`)})},(0,s.ky)(this)}}Fe([s.LO],Be.prototype,"assets",2),Fe([s.LO],Be.prototype,"CertificateData",2),Fe([s.LO],Be.prototype,"IDCard",2),Fe([s.LO],Be.prototype,"Document",2),Fe([s.LO],Be.prototype,"PassKey",2),Fe([s.LO],Be.prototype,"Fine",2),Fe([s.aD],Be.prototype,"fetchCertificate",2),Fe([s.aD],Be.prototype,"updateCertificate",2),Fe([s.aD],Be.prototype,"saveCertificate",2);const te=new Be;var Je=Object.defineProperty,Xe=Object.prototype.hasOwnProperty,Ve=Object.getOwnPropertySymbols,Qe=Object.prototype.propertyIsEnumerable,$e=(g,n,i)=>n in g?Je(g,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[n]=i,Ye=(g,n)=>{for(var i in n||(n={}))Xe.call(n,i)&&$e(g,i,n[i]);if(Ve)for(var i of Ve(n))Qe.call(n,i)&&$e(g,i,n[i]);return g};const we=[{label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",value:-1,hidden:!0},{label:"\u0418\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u043E\u043D\u043D\u0430\u044F \u043A\u0430\u0440\u0442\u0430",value:a.CertificateCategory.IDCard},{label:"\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442",value:a.CertificateCategory.Document},{label:"\u0428\u0442\u0440\u0430\u0444",value:a.CertificateCategory.Fine},{label:"\u041A\u043B\u044E\u0447 \u0434\u043E\u0441\u0442\u0443\u043F\u0430",value:a.CertificateCategory.PassKey}],ke=({orgName:g,id:n})=>{var i;const fe=E.Z.permissions[g],re=(i=fe==null?void 0:fe.certificates)==null?void 0:i.edit,Pe=(0,r.FM)(te.CertificateData,(De,ye)=>De==="id"?ye<0?"":(0,r.Bu)(ye,8):ye),Oe=De=>{te.IDCard.photo=De};return t.createElement(v.Card,{flex:"column top left",elevation:0,header:t.createElement(v.CardHeader,{labelText:n==-1?"\u041D\u043E\u0432\u044B\u0439 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442":`\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442 \u2116${n}`,actions:re?[{text:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",icon:r.PJ.Save,onClick:()=>te.saveCertificate()}]:[]})},t.createElement("div",{className:u.Grid},t.createElement("div",null,t.createElement(v.Card,null,t.createElement("div",{className:u.CertificateRow},t.createElement(d.Ph,Ye({name:"category",options:we,label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043F \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430"},Pe("category",!re))),t.createElement("label",{className:u.Checkbox,htmlFor:"check"},t.createElement("input",{type:"checkbox",name:"check",checked:te.CertificateData.isRevoked,onChange:De=>{te.CertificateData.isRevoked=De.target.checked}}),"\u041E\u0442\u043E\u0437\u0432\u0430\u043D\u043E")),te.CertificateData.category==a.CertificateCategory.IDCard&&t.createElement(ne,{State:te,editable:re,onPhoto:Oe}),te.CertificateData.category==a.CertificateCategory.Document&&t.createElement(Ee,{State:te,editable:re}),te.CertificateData.category==a.CertificateCategory.PassKey&&t.createElement(Q,{State:te,editable:re}),te.CertificateData.category==a.CertificateCategory.Fine&&t.createElement(oe,{State:te,editable:re}))),t.createElement(d.xu,{flex:"row center"},te.CertificateData.category==a.CertificateCategory.IDCard&&t.createElement(l,{firstname:te.IDCard.firstname,lastname:te.IDCard.lastname,age:te.IDCard.age,sex:te.IDCard.sex,photo:te.IDCard.photo,drivingLicenses:te.IDCard.drivingLicenses,weaponLicenses:te.IDCard.weaponLicenses}),te.CertificateData.category==a.CertificateCategory.Document&&t.createElement(S,{firstname:te.Document.firstname,lastname:te.Document.lastname,author:te.Document.author,organization:te.Document.organization,title:te.Document.title,text:te.Document.text,date:te.Document.date}),te.CertificateData.category==a.CertificateCategory.PassKey&&t.createElement(h,{firstname:te.PassKey.firstname,lastname:te.PassKey.lastname,organization:te.PassKey.organization,grade:te.PassKey.grade,id:te.PassKey.id}),te.CertificateData.category==a.CertificateCategory.Fine&&t.createElement(ce,{firstname:te.Fine.firstname,lastname:te.Fine.lastname,lawId:te.Fine.lawId,fineAmount:te.Fine.fineAmount,author:te.Fine.author,date:te.Fine.date,text:te.Fine.text}))))},qe=(0,M.Pi)(ke),je=(0,M.Pi)(({id:g,orgName:n})=>((0,t.useEffect)(()=>{te.updateCertificate(g)},[g]),t.createElement("div",{className:u.Wrapper},t.createElement(v.Preloader,{event:te.assets.certificate,success:qe,orgName:n,id:g})))),_e=je},45595:(V,H,e)=>{e.r(H),e.d(H,{Summary:()=>D,default:()=>$});var t=e(22142),M=e(63193),v=e(11314),d=e(35979),r=e.n(d),E=e(43118),a=e(38481),u=e(68999),le=e(42405),J=Object.defineProperty,_=Object.getOwnPropertyDescriptor,Z=(P,A,F,G)=>{for(var Y=G>1?void 0:G?_(A,F):A,Q=P.length-1,k;Q>=0;Q--)(k=P[Q])&&(Y=(G?k(A,F,Y):k(Y))||Y);return G&&Y&&J(A,F,Y),Y};class U{constructor(){this.assets={},this.wanted=null,this.unpaid=null,this.updateEMS=A=>{this.orgName=A,this.assets.unpaid=le.bl.query("asd",{status:u.PersonStatus.Wanted}).then(F=>(this.unpaid=F.data,F)),this.assets.wanted=le.bl.query("cad/person/search",{status:u.PersonStatus.Wanted}).then(F=>(this.wanted=F.data,F))},(0,a.ky)(this)}}Z([a.LO],U.prototype,"assets",2),Z([a.LO],U.prototype,"orgName",2),Z([a.LO],U.prototype,"wanted",2),Z([a.LO],U.prototype,"unpaid",2),Z([a.aD],U.prototype,"updateEMS",2);const y=new U,R={dashboard:"dashboard___zpwhz",dashboardHead:"dashboardHead___1AT1e",dashboardContent:"dashboardContent___2uYaz",dashboardRow:"dashboardRow___3nsnh",dashboardButton:"dashboardButton___3M87i",dashboardTables:"dashboardTables___Ct_Wm"},O=()=>{const P=(0,M.k6)();return t.createElement(r(),{style:{width:"100%"},components:{Toolbar:()=>t.createElement("div",null)},columns:[{field:"photo",title:"\u0424\u043E\u0442\u043E",render:A=>t.createElement("img",{src:A.photo,style:{width:80,borderRadius:"50%",height:80,objectFit:"cover"},alt:""})},{title:"\u0418\u043C\u044F",field:"name",render:A=>t.createElement("p",{style:{margin:0}},`${A.firstname} ${A.lastname}`)},{title:"\u0422\u0435\u043B\u0435\u0444\u043E\u043D",field:"phone"},{title:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442",field:"age"},{hidden:!0,field:"id"}],data:y.wanted||[],options:{draggable:!1,padding:"dense",pageSizeOptions:[5,10]},onRowClick:(A,F)=>P.push(`/${y.orgName}/person/${F.id}`)})},ne=()=>t.createElement(r(),{style:{width:"100%"},components:{Toolbar:()=>t.createElement("div",null)},columns:[{title:"\u0418\u043C\u044F",field:"firstname",render:P=>t.createElement("p",{style:{margin:0}},`${P.firstname} ${P.lastname}`)},{title:"\u0422\u0435\u043B\u0435\u0444\u043E\u043D",field:"phone"},{hidden:!0,field:"lastname"}],data:y.unpaid,options:{draggable:!1,padding:"dense",pageSizeOptions:[5,10]}}),D=(0,v.Pi)(({orgName:P})=>((0,t.useEffect)(()=>{y.updateEMS(P)},[P]),t.createElement("div",{className:R.dashboard},t.createElement("div",{className:R.dashboardTables},t.createElement(E.Card,{header:"\u0412 \u0440\u043E\u0437\u044B\u0441\u043A\u0435",backgroundColor:"#fff",flex:"column top left"},t.createElement(E.Preloader,{event:y.assets.wanted,success:O})),t.createElement(E.Card,{header:"\u041D\u0435\u043E\u043F\u043B\u0430\u0447\u0435\u043D\u043D\u044B\u0435 \u0448\u0442\u0440\u0430\u0444\u044B",backgroundColor:"#fff",flex:"column top left"},t.createElement(E.Preloader,{event:y.assets.unpaid,success:ne})))))),$=D},98929:(V,H,e)=>{e.r(H),e.d(H,{Summary:()=>ne,default:()=>D});var t=e(22142),M=e(11314),v=e(63193),d=e(12397),r=e(43118),E=e(42405),a=e(38481),u=Object.defineProperty,le=Object.getOwnPropertyDescriptor,J=($,P,A,F)=>{for(var G=F>1?void 0:F?le(P,A):P,Y=$.length-1,Q;Y>=0;Y--)(Q=$[Y])&&(G=(F?Q(P,A,G):Q(G))||G);return F&&G&&u(P,A,G),G},_=($,P,A)=>new Promise((F,G)=>{var Y=I=>{try{k(A.next(I))}catch(x){G(x)}},Q=I=>{try{k(A.throw(I))}catch(x){G(x)}},k=I=>I.done?F(I.value):Promise.resolve(I.value).then(Y,Q);k((A=A.apply($,P)).next())});class Z{constructor(){this.assets={},this.getOrgIcon=P=>`assets/img/logo/${P}.png`,this.Organizations=null,this.Budget=null,this.BudgetHistory=null,this.BudgetHistoryChart=null,this.oilCompanies=[{title:"LTD Oil",price:3},{title:"Globe Oil",price:2.5},{title:"Xero Gas",price:2.8},{title:"RON",price:3.2}],this.fetchBudgets=()=>_(this,null,function*(){return E.bl.query("organizations/budget/get",{}).then(P=>(this.Budget={police:12345,ambulance:54321,oil:23451,government:345612},P))}),this.fetchBudgetHistory=()=>E.bl.query("stats/budget",{}).then(P=>{const A={};return P.data.forEach(F=>{A[F.identifier]||(A[F.identifier]=[]),A[F.identifier].push({t:new Date(F.date),y:F.amount})}),this.BudgetHistory=A,P}),this.updateOrganizations=()=>{this.assets.organizations=this.fetchOrganizations(),this.assets.budgets=this.fetchBudgets(),this.assets.budgetHistory=this.fetchBudgetHistory(),Promise.all([this.assets.organizations,this.assets.budgetHistory]).then(()=>{this.createChart()}).catch(()=>{})},this.fetchOrganizations=()=>E.bl.query("organizations/get",{}).then(P=>{const A=[...P.data];A.sort((F,G)=>F.name-G.name);for(let F=0;F<A.length;F+=1){const G=A[F];G.owner="ABC",G.income=1e3,G.taxPayFraction=25}return this.Organizations=A,P}),this.getOrganization=P=>{var A;return(A=this.Organizations)==null?void 0:A.find(F=>F.name===P)},(0,a.ky)(this)}createChart(){return this.Organizations&&this.BudgetHistory&&(this.BudgetHistoryChart=this.Organizations.map(P=>({label:P.title,data:this.BudgetHistory[P.name]?this.BudgetHistory[P.name]:[],fill:!1,backgroundColor:P.color,borderColor:P.color}))),null}}J([a.LO],Z.prototype,"assets",2),J([a.LO],Z.prototype,"Organizations",2),J([a.LO],Z.prototype,"Budget",2),J([a.LO],Z.prototype,"BudgetHistory",2),J([a.LO],Z.prototype,"BudgetHistoryChart",2),J([a.LO],Z.prototype,"oilCompanies",2),J([a.LO],Z.prototype,"tax",2),J([a.aD],Z.prototype,"fetchBudgets",2),J([a.aD],Z.prototype,"fetchBudgetHistory",2),J([a.aD],Z.prototype,"updateOrganizations",2),J([a.aD],Z.prototype,"fetchOrganizations",2);const U=new Z,y={DashboardWrapper:"DashboardWrapper___QkD_h",DashboardBalance:"DashboardBalance___RkBPD",DashboardBudget:"DashboardBudget___2HTuS",DashboardChart:"DashboardChart___1zr4z",DashboardMoreButton:"DashboardMoreButton___1WwO6",DashboardOrganization:"DashboardOrganization___3nZb-",DashboardOrganizationCard:"DashboardOrganizationCard___Dj5yo",DashboardOrganizationWrapper:"DashboardOrganizationWrapper___3Q84b",DashboardOrganizationBox:"DashboardOrganizationBox___3yF-A",DashboardOrganizationName:"DashboardOrganizationName___1VQv_",DashboardOrganizationLeader:"DashboardOrganizationLeader___3T0Dy",DashboardOrganizationBalance:"DashboardOrganizationBalance___2cI_A",DashboardOrganizationBalanceDiff:"DashboardOrganizationBalanceDiff___D4AOm",DashboardOrganizationDetailsWrapper:"DashboardOrganizationDetailsWrapper___3p0tR",DashboardFill:"DashboardFill___3k3he",DashboardFillWrapper:"DashboardFillWrapper___2w20Y",DashboardButton:"DashboardButton___1RYqt",DashboardTax:"DashboardTax___2viby",DashboardTaxCard:"DashboardTaxCard___1G1-d",DashboardOilCard:"DashboardOilCard___18WOq"},R=()=>{var $,P;return t.createElement("p",{className:y.DashboardBalance},(0,E.lb)(((P=($=U)==null?void 0:$.Budget)==null?void 0:P.government)||0))},O=()=>{const $=(0,v.k6)();return U.Organizations.map(P=>t.createElement(d.xu,{key:P.name,flex:"row",className:y.DashboardOrganization},t.createElement("div",{className:y.DashboardOrganizationWrapper},t.createElement("p",{className:y.DashboardOrganizationName},P.title),t.createElement("p",{className:y.DashboardOrganizationLeader},P.owner)),t.createElement("div",{className:y.DashboardOrganizationBox},t.createElement("div",{className:y.DashboardOrganizationDetailsWrapper},t.createElement("p",{className:y.DashboardOrganizationBalance},U.Budget&&(0,E.lb)(U.Budget[P.name]||0)),t.createElement("p",{className:y.DashboardOrganizationBalanceDiff},P.income>0?"+":"-",(0,E.lb)(Math.abs(P.income)))),t.createElement(d.e6,{value:P.taxPayFraction,min:0,max:100,onChange:()=>{}})),t.createElement("button",{className:y.DashboardButton,type:"button",onClick:()=>$.push(`/${P.name}/manage`)},">")))},ne=(0,M.Pi)(()=>{const $=(0,v.k6)();return(0,t.useEffect)(()=>{U.updateOrganizations()},[]),t.createElement("main",{className:y.DashboardWrapper},t.createElement("div",{className:""},t.createElement(r.Card,{header:"\u0411\u044E\u0434\u0436\u0435\u0442",className:y.DashboardBudget},t.createElement(r.Preloader,{event:U.assets.budgets,success:R})),t.createElement(r.Card,{header:"\u041E\u0440\u0433\u0430\u043D\u0438\u0437\u0430\u0446\u0438\u0438",className:y.DashboardOrganizationCard,flex:"column top"},t.createElement(r.Preloader,{event:U.assets.organizations,success:O}))),t.createElement("div",{className:""},t.createElement(r.Card,{className:y.DashboardChart},t.createElement(r.Preloader,{event:U.assets.budgetHistory,success:r.BudgetChart,data:U.BudgetHistoryChart})),t.createElement(r.Card,{header:"\u041D\u0430\u043B\u043E\u0433\u0438",className:y.DashboardTax},t.createElement(d.xu,{elevation:"0",className:y.DashboardTaxCard},t.createElement("span",null,"\u0422\u0438\u043F \u043D\u0430\u043B\u043E\u0433\u0430"),t.createElement("span",null,"% \u0441\u0442\u0430\u0432\u043A\u0430"),t.createElement("span",null,"\u0421\u0435\u0433\u043E\u0434\u043D\u044F")),U.tax&&U.tax.map(P=>t.createElement(d.xu,{key:P.name,className:y.DashboardTaxCard},t.createElement("span",null,P.label),t.createElement("span",null," ",P.amount,"%"),t.createElement("span",null,P.incomdeDay&&(0,E.lb)(P.incomeDay)))),t.createElement(d.xu,{flex:"column bottom",className:y.DashboardMoreButton,onClick:()=>$.push("/government/tax")},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435")),t.createElement(r.Card,{header:"\u0422\u043E\u043F\u043B\u0438\u0432\u043E"},t.createElement(d.xu,{elevation:"0",className:y.DashboardOilCard},t.createElement("span",null,"\u041A\u043E\u043C\u043F\u0430\u043D\u0438\u044F"),t.createElement("span",null,"\u0426\u0435\u043D\u0430")),U.oilCompanies.map(P=>t.createElement(d.xu,{key:P.title,className:y.DashboardOilCard},t.createElement("span",null,P.title),t.createElement("span",null,(0,E.lb)(P.price)))),t.createElement(d.xu,{flex:"column bottom",className:y.DashboardMoreButton,onClick:()=>$.push("/oil/stations")},"\u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435"))))}),D=ne},6681:(V,H,e)=>{e.r(H),e.d(H,{default:()=>Ee});var t=e(22142),M=e(11314),v=e(43118),d=e(42405);const r={Wrapper:"Wrapper___11Oto",Header:"Header___1sO5B",HeaderImg:"HeaderImg___1kifW",HeaderTitle:"HeaderTitle___16vRR",HeaderOwner:"HeaderOwner___3Gd0y",HeaderOwnerWrapper:"HeaderOwnerWrapper___15HY0",HeaderOwnerAction:"HeaderOwnerAction___2FAo7",Main:"Main___1LNNM",MainBudget:"MainBudget___1ZUaI",MainBudgetTitle:"MainBudgetTitle___3kpqL",MainBudgetRow:"MainBudgetRow___epBkq",MainCoworkers:"MainCoworkers___3_ea6",MainPosition:"MainPosition___3Y5F6",MainPositionRow:"MainPositionRow___KOv67"};var E=e(38481),a=e(76358),u=Object.defineProperty,le=Object.prototype.hasOwnProperty,J=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertySymbols,Z=Object.prototype.propertyIsEnumerable,U=(K,B,L)=>B in K?u(K,B,{enumerable:!0,configurable:!0,writable:!0,value:L}):K[B]=L,y=(K,B)=>{for(var L in B||(B={}))le.call(B,L)&&U(K,L,B[L]);if(_)for(var L of _(B))Z.call(B,L)&&U(K,L,B[L]);return K},R=(K,B,L,q)=>{for(var se=q>1?void 0:q?J(B,L):B,pe=K.length-1,de;pe>=0;pe--)(de=K[pe])&&(se=(q?de(B,L,se):de(se))||se);return q&&se&&u(B,L,se),se};class O{constructor(){this.assets={},this.org=null,this.grades=null,this.employees=null,this.budgetHistory=null,this.budget=null,this.updateOrganization=B=>{this.assets.organization=d.bl.query("organizations/get",{name:B}).then(L=>{const q=y({},L.data[0]);return q.icon=`assets/img/logo/${B}.png`,q.owner="ABC",q.income=1e3,q.taxPayFraction=25,q.permissions=a.Z.permissions[B],this.org=q,L}),this.assets.budgetHistory=d.bl.query("stats/budget",{name:B}).then(L=>(this.budgetHistory=L.data.map(q=>({t:new Date(q.date),y:q.amount})),L)),this.assets.budget=d.bl.query("organizations/budget/get",{name:B}).then(L=>(this.budget=L,L)),this.updateEmployees(B),this.updateGrades(B)},this.updateGrades=B=>{this.assets.grades=d.bl.query("roles/grades/get",{role:B}).then(L=>{this.grades=L.data}).catch(()=>{})},this.updateEmployees=B=>{this.assets.employees=d.bl.query("roles/get",{role:B}).then(L=>{this.employees=L.data}).catch(()=>{})},(0,E.ky)(this)}}R([E.LO],O.prototype,"assets",2),R([E.LO],O.prototype,"org",2),R([E.LO],O.prototype,"grades",2),R([E.LO],O.prototype,"employees",2),R([E.LO],O.prototype,"budgetHistory",2),R([E.LO],O.prototype,"budget",2),R([E.aD],O.prototype,"updateOrganization",2),R([E.aD],O.prototype,"updateGrades",2),R([E.aD],O.prototype,"updateEmployees",2);const D=new O;var $=e(35979),P=e.n($),A=(K,B,L)=>new Promise((q,se)=>{var pe=X=>{try{oe(L.next(X))}catch(c){se(c)}},de=X=>{try{oe(L.throw(X))}catch(c){se(c)}},oe=X=>X.done?q(X.value):Promise.resolve(X.value).then(pe,de);oe((L=L.apply(K,B)).next())});function F(K){var B,L,q,se;const{onSalaryChange:pe}=K,de=((B=D.org)==null?void 0:B.permissions.manage)||{};return de.grades?t.createElement(v.Card,{header:"\u0414\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u0438",className:r.MainPosition,flex:"column top"},t.createElement(P(),{style:{width:"100%"},components:{Toolbar:()=>t.createElement("div",null),Pagination:()=>t.createElement("td",null)},localization:{header:{actions:""}},columns:[{title:"\u0414\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u044C",field:"label",editable:"never"},{title:"\u0417\u0430\u0440\u043F\u043B\u0430\u0442\u0430",field:"salary",editable:((L=de.grades)==null?void 0:L.edit)?"always":"never"}],cellEditable:{onCellEditApproved:(oe,X,c,S)=>A(this,null,function*(){pe(c.grade,parseInt(oe,10))})},data:D.grades||[],isLoading:!D.grades,options:{draggable:!1,thirdSortClick:!1,pageSize:((q=D.grades)==null?void 0:q.length)||1,pageSizeOptions:[((se=D.grades)==null?void 0:se.length)||1],padding:"dense"}})):null}const G=(0,M.Pi)(F),Y=K=>{var B,L,q;return((q=(L=(B=K.permissions)==null?void 0:B.manage)==null?void 0:L.employees)==null?void 0:q.edit)?[{text:"\u041D\u0430\u043D\u044F\u0442\u044C",icon:d.PJ.ControlPoint,onClick:()=>{d.bl.query("cad/jobs/hire",{org:K.name})}}]:[]};function Q(K){const B={"-1":"* \u0423\u0432\u043E\u043B\u0438\u0442\u044C *"};return K&&K.forEach(L=>{B[L.grade]=L.label}),B}function k(){var K,B,L,q;const se=(B=(K=D.org)==null?void 0:K.permissions)==null?void 0:B.manage,pe=(de,oe,X,c)=>{var S;return d.bl.query("jobsChangeGrade",{identifier:X.identifier,role:(S=D.org)==null?void 0:S.name,grade:parseInt(de,10)}).then(()=>{D.updateEmployees(D.org.name)}).catch(T=>{console.log(T),(0,d.vU)("\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u0441\u043C\u0435\u043D\u0438\u0442\u044C \u0434\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u044C!")}),new Promise(T=>T())};return t.createElement(v.Card,{header:t.createElement(v.CardHeader,{labelText:"\u0421\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0438",actions:Y(D.org)}),className:r.MainCoworkers,flex:"column top"},t.createElement(P(),{components:{Toolbar:()=>t.createElement("div",null)},localization:{header:{actions:""}},columns:[{title:"\u0421\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A",field:"name",editable:"never"},{title:"\u041D\u0430 \u0441\u043C\u0435\u043D\u0435",field:"time",editable:"never"},{title:"\u0414\u043E\u043B\u0436\u043D\u043E\u0441\u0442\u044C",field:"grade",lookup:Q(D.grades),editable:((L=se==null?void 0:se.employees)==null?void 0:L.edit)?"always":"never"},{field:"identifier",hidden:!0},{field:"grade",hidden:!0}],isLoading:!D.grades,cellEditable:{onCellEditApproved:pe},data:D.employees||[],actions:((q=se==null?void 0:se.employees)==null?void 0:q.edit)?[{icon:()=>t.createElement("div",{style:{width:24}},d.PJ.Prize),tooltip:"\u041F\u0440\u0435\u043C\u0438\u044F",onClick:(de,oe)=>console.log("FIXME",de,oe)}]:[],options:{draggable:!1,actionsColumnIndex:-1,thirdSortClick:!1,padding:"dense",pageSize:8,pageSizeOptions:[8],minBodyHeight:326,maxBodyHeight:326}}))}const I=(0,M.Pi)(k);function x(K,B){return K?[{label:K.title,data:B,fill:!1,backgroundColor:K.color,borderColor:K.color}]:[]}const N=({permissions:K})=>t.createElement(t.Fragment,null,t.createElement("img",{className:r.HeaderImg,src:D.org.icon,alt:""}),t.createElement("p",{className:r.HeaderTitle},D.org.title),(K==null?void 0:K.leader)&&t.createElement("div",{className:r.HeaderOwnerWrapper},t.createElement("p",{className:r.HeaderOwner},D.org.owner),t.createElement("button",{className:r.HeaderOwnerAction,type:"button"},"\u0423\u0432\u043E\u043B\u0438\u0442\u044C"))),p=()=>{var K,B;return t.createElement(t.Fragment,null,((K=D)==null?void 0:K.budgetHistory)&&((B=D)==null?void 0:B.org)&&t.createElement(v.BudgetChart,{data:x(D.org,D.budgetHistory)}))},ae=()=>{var K;return t.createElement(t.Fragment,null,t.createElement("p",{className:r.MainBudgetTitle},(0,d.lb)(((K=D.org)==null?void 0:K.budget)||0)),t.createElement("p",{className:r.MainBudgetRow},"\u0421\u0435\u0433\u043E\u0434\u043D\u044F:",t.createElement("span",null,"+ 10 000")),t.createElement("p",{className:r.MainBudgetRow},"\u0417\u0430 \u043D\u0435\u0434\u0435\u043B\u044E:",t.createElement("span",null,"+ 20 000")),t.createElement(v.Preloader,{event:Promise.all([D.assets.budgetHistory,D.assets.organization]),success:p}))},ie=({orgName:K})=>{var B,L;(0,t.useEffect)(()=>{D.updateOrganization(K)},[K]);const q=(pe,de)=>(d.bl.query("jobsChangeSalary",{role:D.org.name,grade:pe,salary:de}).then(()=>{D.updateGrades(K)}).catch(oe=>{console.log(oe),(0,d.vU)("\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u0438\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0437\u0430\u0440\u0430\u0431\u043E\u0442\u043D\u0443\u044E \u043F\u043B\u0430\u0442\u0443!")}),new Promise(oe=>oe())),se=(L=(B=D.org)==null?void 0:B.permissions)==null?void 0:L.manage;return t.createElement("div",{className:r.Wrapper},t.createElement(v.Card,null,t.createElement("div",{className:r.Header},t.createElement(v.Preloader,{event:D.assets.organization,success:N,permissions:se}))),t.createElement("main",{className:r.Main},t.createElement("div",{className:""},t.createElement(v.Card,{header:"\u0411\u044E\u0434\u0436\u0435\u0442",className:r.MainBudget,flex:"column top center"},t.createElement(v.Preloader,{event:D.assets.organization,success:ae}))),t.createElement("div",null,t.createElement(v.Preloader,{event:D.assets.organization,success:I}),t.createElement(v.Preloader,{event:D.assets.organization,success:G,onSalaryChange:q}))))},Ee=(0,M.Pi)(ie)},60417:(V,H,e)=>{e.r(H),e.d(H,{Person:()=>f,default:()=>b});var t=e(22142),M=e(63193),v=e(11314),d=e(43118),r=e(12397),E=e(73642),a=e(42405),u=e(37437),le=e(76358),J=e(35979),_=e.n(J);function Z({State:h,orgName:s}){const m=(0,M.k6)(),W=(j,w)=>{m.push(`/${s}/record/${w.id}`)};return t.createElement(_(),{style:{width:"100%"},components:{Toolbar:()=>null},columns:[{title:"\u0421\u0442\u0430\u0442\u0443\u0441",field:"isArchived",lookup:{0:"\u041E\u0442\u043A\u0440\u044B\u0442\u043E",1:"\u0417\u0430\u043A\u0440\u044B\u0442\u043E"}},{title:"\u2116 \u0434\u0435\u043B\u0430",field:"idPadded"},{title:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",field:"category",lookup:{0:"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043D\u043E\u0435",1:"\u0423\u0433\u043E\u043B\u043E\u0432\u043D\u043E\u0435"}},{title:"\u0414\u0430\u0442\u0430",field:"date",type:"date"}],data:h.Cases,isLoading:!h.Cases,options:{draggable:!1,padding:"dense",pageSize:16,pageSizeOptions:[16]},onRowClick:W})}const U=(0,v.Pi)(Z),y=(0,v.Pi)(Z);var R=e(68999);function O({State:h,orgName:s}){const m=(0,M.k6)(),W=(j,w)=>{m.push(`/${s}/certificate/${w.id}`)};return t.createElement(_(),{style:{width:"100%"},components:{Toolbar:()=>null},columns:[{title:"\u0421\u0442\u0430\u0442\u0443\u0441",field:"isRevoked",lookup:{0:"\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442",1:"\u041D\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u0430"}},{title:"\u2116 \u0441\u043F\u0440\u0430\u0432\u043A\u0438",field:"id"},{title:"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044F",field:"category",lookup:{[R.CertificateCategory.IDCard]:"\u0418\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u043E\u043D\u043D\u0430\u044F \u043A\u0430\u0440\u0442\u0430",[R.CertificateCategory.Document]:"\u0414\u043E\u043A\u0443\u043C\u0435\u043D\u0442",[R.CertificateCategory.Fine]:"\u0428\u0442\u0440\u0430\u0444",[R.CertificateCategory.PassKey]:"\u041A\u043B\u044E\u0447 \u0434\u043E\u0441\u0442\u0443\u043F\u0430"}},{title:"\u0414\u0430\u0442\u0430 \u0432\u044B\u0434\u0430\u0447\u0438",field:"date",type:"date"},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043B\u044C\u043D\u043E \u0434\u043E",field:"expireDate",type:"date"},{title:"\u0412\u044B\u0434\u0430\u043B",field:"author"}],data:h.Certificates,isLoading:!h.Certificates,options:{draggable:!1,padding:"dense",pageSize:16,pageSizeOptions:[16]},onRowClick:W})}const ne=(0,v.Pi)(O),D=(0,v.Pi)(O);function $({State:h}){const s=(0,M.k6)(),m=(W,j)=>{s.push(`/ambulance/record/${j.id}`)};return t.createElement(_(),{style:{width:"100%"},components:{Toolbar:()=>null},columns:[{title:"\u0414\u0430\u0442\u0430",field:"date",type:"date"},{title:"\u041F\u0440\u0438\u0447\u0438\u043D\u0430 \u043E\u0431\u0440\u0430\u0449\u0435\u043D\u0438\u044F",field:"title"},{title:"\u041B\u0435\u0447\u0430\u0449\u0438\u0439 \u0432\u0440\u0430\u0447",field:"responsible"}],data:h.IllnesList,isLoading:h.IllnesList===void 0,options:{draggable:!1,padding:"dense",pageSize:16,pageSizeOptions:[16]},onRowClick:m})}const P=(0,v.Pi)($),A=(0,v.Pi)($);function F({State:h}){return t.createElement(_(),{style:{width:"100%"},title:"\u041F\u0440\u0430\u0432\u043E\u043D\u0430\u0440\u0443\u0448\u0435\u043D\u0438\u044F",components:{Toolbar:()=>null},columns:[{title:"\u0418\u043D\u0434\u0435\u043A\u0441",field:"id",hidden:!0},{title:"\u0421\u0442\u0430\u0442\u044C\u044F",field:"label"},{title:"\u0420\u0430\u0437\u043C\u0435\u0440 \u0432\u0437\u044B\u0441\u043A\u0430\u043D\u0438\u044F",field:"fineAmount"},{title:"\u0421\u0440\u043E\u043A",field:"detentionAmount"},{title:"\u0414\u0430\u0442\u0430",field:"date",type:"date"},{title:"\u0417\u0430\u043A\u0440\u044B\u0442\u043E",field:"closed",lookup:{0:"\u041D\u0435\u0442",1:"\u0414\u0430"}}],actions:[{icon:"close",tooltip:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C",onClick:(s,m)=>h.violationCloseHandler(s,m)}],data:h.Violations,isLoading:!h.Violations,options:{draggable:!1,padding:"dense",actionsColumnIndex:-1,pageSize:16,pageSizeOptions:[16]}})}const G=(0,v.Pi)(F),Y=(0,v.Pi)(F);var Q=e(38481);function k(){return{sex:0,firstname:"",lastname:"",age:18,status:R.PersonStatus.Alive,phone:"",photo:"assets/img/person.jpg"}}const I=null;var x=Object.defineProperty,N=Object.prototype.hasOwnProperty,p=Object.getOwnPropertyDescriptor,ae=Object.getOwnPropertySymbols,ie=Object.prototype.propertyIsEnumerable,Ee=(h,s,m)=>s in h?x(h,s,{enumerable:!0,configurable:!0,writable:!0,value:m}):h[s]=m,K=(h,s)=>{for(var m in s||(s={}))N.call(s,m)&&Ee(h,m,s[m]);if(ae)for(var m of ae(s))ie.call(s,m)&&Ee(h,m,s[m]);return h},B=(h,s,m,W)=>{for(var j=W>1?void 0:W?p(s,m):s,w=h.length-1,ge;w>=0;w--)(ge=h[w])&&(j=(W?ge(s,m,j):ge(j))||j);return W&&j&&x(s,m,j),j},L=(h,s,m)=>{if(!s.has(h))throw TypeError("Cannot "+m)},q=(h,s,m)=>(L(h,s,"read from private field"),m?m.call(h):s.get(h)),se=(h,s,m,W)=>(L(h,s,"write to private field"),W?W.call(h,m):s.set(h,m),m),pe=(h,s,m)=>new Promise((W,j)=>{var w=ee=>{try{me(m.next(ee))}catch(Ce){j(Ce)}},ge=ee=>{try{me(m.throw(ee))}catch(Ce){j(Ce)}},me=ee=>ee.done?W(ee.value):Promise.resolve(ee.value).then(w,ge);me((m=m.apply(h,s)).next())}),de;class oe{constructor(){de.set(this,void 0),this.assets={},this.Person=K({},k()),this.Cases=void 0,this.Violations=void 0,this.IllnesList=void 0,this.Certificates=void 0,this.status=R.PersonStatus.Alive,this.violationCloseHandler=(s,m)=>a.bl.query("cad/violations/close",{id:m.id}).then(W=>{const j=[...this.Violations],w=j.findIndex(ge=>ge.id===m.id);return j[w]&&(j[w].closed=!0),this.Violations=j,W}),this.fetchPersonCertificates=()=>{a.bl.query("certificates/list",{}).then(s=>(this.Certificates=[...s.data],!0)).catch(s=>{(0,a.vU)(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u0430! ${s}`)})},this.fetchPersonAmbulance=()=>{q(this,de).then(s=>(this.IllnesList=s.data,!0)).catch(s=>(0,a.vU)(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0438\u0441\u0442\u043E\u0440\u0438\u0438 \u0431\u043E\u043B\u0435\u0437\u043D\u0438! ${s}`))},this.fetchPersonPolice=()=>{q(this,de).then(s=>(this.Cases=s.data.map(m=>{const W=m;return W.idPadded=(0,a.Bu)(m.id,8),W}),a.bl.query("cad/violations/list",{firstname:this.Person.firstname,lastname:this.Person.lastname}).then(m=>(this.Violations=m.data,!0)).catch(m=>(0,a.vU)(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0441\u043F\u0438\u0441\u043A\u0430 \u043D\u0430\u0440\u0443\u0448\u0435\u043D\u0438\u0439! ${m}`)),!0))},this.fetchPerson=(s,m)=>m<0?new Promise(W=>W(!0)):a.bl.query("cad/person/get",{id:m}).then(W=>(this.Person=K({},W.data[0]),this.status=this.Person.status,se(this,de,a.bl.query("cad/participants/byname",{organization:s,firstname:this.Person.firstname,lastname:this.Person.lastname}).catch(j=>(0,a.vU)(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u0441\u043F\u0438\u0441\u043A\u0430 \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432 \u0434\u0435\u043B\u0430! ${j}`))),s==="police"&&this.fetchPersonPolice(),s==="ambulance"&&this.fetchPersonAmbulance(),this.fetchPersonCertificates(),!0)).catch(W=>((0,a.vU)(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0438 \u043F\u0435\u0440\u0441\u043E\u043D\u044B! ${W}`),!1)),this.updatePerson=(s,m)=>{this.assets.person=this.fetchPerson(s,m)},this.savePerson=(s,m)=>pe(this,null,function*(){return this.Person.firstname.length===0?((0,a.ZK)("\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u0438\u043C\u044F!"),!1):this.Person.lastname.length===0?((0,a.ZK)("\u041D\u0435\u043E\u0431\u0445\u043E\u0434\u0438\u043C\u043E \u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u044C \u0444\u0430\u043C\u0438\u043B\u0438\u044E!"),!1):this.Person.age<18||this.Person.age>99?((0,a.ZK)("\u0412\u043E\u0437\u0440\u0430\u0441\u0442 \u0434\u043E\u043B\u0436\u0435\u043D \u0431\u044B\u0442\u044C \u043E\u0442 18 \u0434\u043E 99 \u043B\u0435\u0442!"),!1):(s<0?a.bl.query("cad/person/create",this.Person).then(W=>{var j;const w=(j=W==null?void 0:W.data)==null?void 0:j.id;w?m.push(`/police/person/${w}`):(0,a.ZK)(`\u0418\u0434\u0435\u043D\u0442\u0438\u0444\u0438\u043A\u0430\u0442\u043E\u0440 \u043B\u0438\u0447\u043D\u043E\u0441\u0442\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D! \u0417\u0430\u043F\u0440\u043E\u0441: ${W}`)}).catch(W=>{(0,a.vU)(`\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0434\u0435\u043B\u043E! \u041E\u0448\u0438\u0431\u043A\u0430: ${W}`)}):a.bl.query("cad/person/update",this.Person).then(()=>{(0,a.Vp)("\u0414\u0435\u043B\u043E \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E!")}).catch(W=>(0,a.vU)(`\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0434\u0435\u043B\u043E! \u041E\u0448\u0438\u0431\u043A\u0430: ${W}`)),!0)}),this.deletePerson=s=>(console.log(s),a.bl.query("cad/person/delete",{id:s})),(0,Q.ky)(this)}}de=new WeakMap,B([Q.LO],oe.prototype,"assets",2),B([Q.LO],oe.prototype,"Person",2),B([Q.LO],oe.prototype,"Cases",2),B([Q.LO],oe.prototype,"Violations",2),B([Q.LO],oe.prototype,"IllnesList",2),B([Q.LO],oe.prototype,"Certificates",2),B([Q.LO],oe.prototype,"status",2),B([Q.aD],oe.prototype,"violationCloseHandler",2),B([Q.aD],oe.prototype,"fetchPerson",2),B([Q.aD],oe.prototype,"updatePerson",2),B([Q.aD],oe.prototype,"savePerson",2),B([Q.aD],oe.prototype,"deletePerson",2);const X=new oe,c={PersonGrid:"PersonGrid___227lR",PersonTables:"PersonTables___1p8xL",PersonData:"PersonData___1iTQ0",PersonAvatar:"PersonAvatar___wa6cB",PersonAvatarImage:"PersonAvatarImage____xdgB",PersonAvatarAction:"PersonAvatarAction___YDxAg",PersonRow:"PersonRow___1EhJP"};var S=Object.defineProperty,T=Object.prototype.hasOwnProperty,C=Object.getOwnPropertySymbols,z=Object.prototype.propertyIsEnumerable,ce=(h,s,m)=>s in h?S(h,s,{enumerable:!0,configurable:!0,writable:!0,value:m}):h[s]=m,ue=(h,s)=>{for(var m in s||(s={}))T.call(s,m)&&ce(h,m,s[m]);if(C)for(var m of C(s))z.call(s,m)&&ce(h,m,s[m]);return h},o=(h,s,m)=>new Promise((W,j)=>{var w=ee=>{try{me(m.next(ee))}catch(Ce){j(Ce)}},ge=ee=>{try{me(m.throw(ee))}catch(Ce){j(Ce)}},me=ee=>ee.done?W(ee.value):Promise.resolve(ee.value).then(w,ge);me((m=m.apply(h,s)).next())});const l=(0,v.Pi)(({orgName:h,editable:s})=>{const[m,W]=(0,t.useState)(!1),j=(0,u.a)(h,!0),w=(me,ee)=>ee?{value:X.Person[me],onChange:()=>{},readOnly:!0}:{value:X.Person[me],onChange:Ce=>{X.Person[me]=Ce.target.value}},ge=me=>{X.Person.photo=me,W(!1)};return t.createElement("div",{className:c.PersonData},t.createElement("div",{className:c.PersonAvatar},!m&&t.createElement("button",{type:"button",onClick:()=>W(!0),className:c.PersonAvatarAction},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"),m?t.createElement(E.j,{onMediaAdd:ge}):t.createElement("img",{className:c.PersonAvatarImage,src:X.Person.photo,alt:""})),t.createElement(r.nv,ue({variant:"outlined",id:"firstname",label:"\u0418\u043C\u044F",fullWidth:!0},w("firstname",!s))),t.createElement(r.nv,ue({variant:"outlined",id:"lastname",label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F",fullWidth:!0},w("lastname",!s))),t.createElement("div",{className:c.PersonRow},t.createElement(r.Ph,ue({readOnly:!s,name:"category",id:"cat",options:(0,a.tD)()},w("sex",!s))),t.createElement(r.nv,ue({variant:"outlined",id:"age",label:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442",fullWidth:!0},w("age",!s)))),t.createElement(r.Ph,ue({readOnly:!s,name:"status",id:"cat",options:j},w("status",!s))),t.createElement(r.nv,ue({variant:"outlined",id:"phone",label:"\u0422\u0435\u043B\u0435\u0444\u043E\u043D",fullWidth:!0},w("phone",!s))))}),f=(0,v.Pi)(({id:h,orgName:s})=>{var m;const W=(0,M.k6)(),j=le.Z.permissions[s],w=(m=j==null?void 0:j.persons)==null?void 0:m.edit,ge=()=>{var me;if(!w)return[];const ee=[{text:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",icon:a.PJ.Save,onClick:()=>X.savePerson(h,W)}];return((me=j==null?void 0:j.persons)==null?void 0:me.remove)&&ee.push({text:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",icon:a.PJ.RemoveCircleOutline,onClick:()=>X.deletePerson(h.toString()).then(()=>o(void 0,null,function*(){return(0,a.Vp)("\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u0434\u0430\u043B\u0435\u043D\u043E!"),yield W.replace(`/${s}/search`),!0}))}),ee};return(0,t.useEffect)(()=>{X.updatePerson(s,h)},[h,s]),t.createElement("div",{style:{padding:"10px 0"}},t.createElement(d.Card,{header:t.createElement(d.CardHeader,{labelText:"\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u043B\u0438\u044F",actions:ge()})},t.createElement("div",{className:c.PersonGrid},h>=0&&t.createElement("div",{className:c.PersonTables},t.createElement(d.Tabs,{defaultPage:s==="ambulance"?"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u0431\u043E\u043B\u0435\u0437\u043D\u0438":"\u0423\u043F\u043E\u043C\u0438\u043D\u0430\u043D\u0438\u044F \u0432 \u0434\u0435\u043B\u0430\u0445"},s==="ambulance"&&t.createElement(P,{key:"\u0418\u0441\u0442\u043E\u0440\u0438\u044F \u0431\u043E\u043B\u0435\u0437\u043D\u0438",State:X}),s==="police"&&t.createElement(U,{key:"\u0423\u043F\u043E\u043C\u0438\u043D\u0430\u043D\u0438\u044F \u0432 \u0434\u0435\u043B\u0430\u0445",State:X,orgName:s}),s==="police"&&t.createElement(G,{key:"\u041F\u0440\u0430\u0432\u043E\u043D\u0430\u0440\u0443\u0448\u0435\u043D\u0438\u044F",State:X}),t.createElement(ne,{key:"\u0421\u043F\u0440\u0430\u0432\u043A\u0438",State:X,orgName:s}))),t.createElement(r.xu,{elevation:2},t.createElement(d.Preloader,{event:X.assets.person,success:l,orgName:s,editable:w})))))}),b=f},73642:(V,H,e)=>{e.d(H,{j:()=>u});var t=e(22142),M=e(23247),v=e.n(M),d=e(12397),r=e(42405);const E={MediaControls:"MediaControls___3hcvi",MediaControlsGrid:"MediaControlsGrid___2JPUc",MediaControlsControls:"MediaControlsControls___1SPNi",MediaControlsPaste:"MediaControlsPaste___1Jf8w",MediaControlsAdd:"MediaControlsAdd___1HYSE",ResponsiveImage:"ResponsiveImage___o3lae"};var a=(J,_,Z)=>new Promise((U,y)=>{var R=D=>{try{ne(Z.next(D))}catch($){y($)}},O=D=>{try{ne(Z.throw(D))}catch($){y($)}},ne=D=>D.done?U(D.value):Promise.resolve(D.value).then(R,O);ne((Z=Z.apply(J,_)).next())});const u=({onMediaAdd:J,hasVideo:_=!1,hasClip:Z=!1,hasDescription:U=!1})=>{const[y,R]=(0,t.useState)(""),[O,ne]=(0,t.useState)(""),[D,$]=(0,t.useState)(!1),[P,A]=(0,t.useState)(!1),[F,G]=(0,t.useState)(!1),Y=(0,t.useRef)(),Q=(0,t.useRef)(),k=(0,t.useRef)(),I=(0,t.useRef)(),x=B=>{I.current.value="",$(!0),A(!1),R(`https://img.youtube.com/vi/${B.target.value}/0.jpg`),G(!0)},N=B=>{I.current&&(I.current.value=""),k.current&&(k.current.value=""),$(!1),A(!1),R(B.target.value),G(!0)},p=B=>{I.current.value="",Y.current.value="",A(!0),$(!1),r.BE.get(`https://api.twitch.tv/kraken/clips/${B.target.value}`).then(L=>a(void 0,null,function*(){R(L.data.thumbnails.medium),G(!0)})).catch(L=>{console.log(L),(0,r.vU)("\u041C\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D! \u041F\u0440\u043E\u0432\u0435\u0440\u044C\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E\u0441\u0442\u044C \u0432\u0432\u0435\u0434\u0435\u043D\u043E\u0433\u043E Id"),G(!1)})},ae=B=>ne(B.target.value);function ie(B,L){const q=new XMLHttpRequest;q.onload=function(){const se=new FileReader;se.onloadend=function(){L(se.result)},se.readAsDataURL(q.response)},q.open("GET",B),q.responseType="blob",q.send()}const Ee=B=>{if(B.clipboardData){const{items:L}=B.clipboardData;if(!L)return;let q=!1;for(let se=0;se<L.length;se+=1)if(L[se].type.indexOf("image")!==-1){const pe=L[se].getAsFile(),oe=(window.URL||window.webkitURL).createObjectURL(pe);q=!0,ie(oe,X=>{v().post("http://46.188.28.129:7070/image/upload",{dataurl:X}).then(c=>{const{url:S}=c.data;R(S),$(!1),G(!0)}).catch(c=>{(0,r.vU)(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0441\u043A\u0440\u0438\u043D\u0448\u043E\u0442\u0430! \u041F\u0435\u0440\u0435\u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u0435 CAD \u0438 \u043F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0441\u043D\u043E\u0432\u0430. ${c}`),console.log(c),G(!1)})});break}q&&(B.preventDefault(),$(!1),G(!0))}},K=()=>{Y.current&&(Y.current.value=""),Q.current&&(Q.current.value=""),k.current&&(k.current.value=""),G(!1)};return t.createElement("div",{className:E.MediaControlsGrid},t.createElement("div",null,t.createElement(d.xu,{className:E.MediaControlsControls,elevation:0,flex:"column top"},_&&t.createElement(t.Fragment,null,t.createElement(d.nv,{variant:"outlined",fullWidth:!0,label:"\u0412\u0441\u0442\u0430\u0432\u044C\u0442\u0435 id YouTube",onChange:x,inputRef:Y}),t.createElement("p",null,"\u0418\u041B\u0418")),Z&&t.createElement(t.Fragment,null,t.createElement(d.nv,{variant:"outlined",fullWidth:!0,label:"\u0412\u0441\u0442\u0430\u0432\u044C\u0442\u0435 id \u043A\u043B\u0438\u043F\u0430 Twitch",onChange:p,inputRef:k}),t.createElement("p",null,"\u0418\u041B\u0418")),t.createElement(d.nv,{variant:"outlined",fullWidth:!0,label:"\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435",onChange:N,inputRef:Q}),t.createElement("p",null,"\u0418\u041B\u0418"),t.createElement(d.xu,{className:E.MediaControlsPaste,elevation:4,onPaste:Ee,tabIndex:"-1"},"\u041A\u043B\u0438\u043A\u043D\u0438\u0442\u0435 \u0441\u044E\u0434\u0430 \u0438 \u043D\u0430\u0436\u043C\u0438\u0442\u0435 Ctrl+V, \u0447\u0442\u043E\u0431\u044B \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0438\u0437 \u0431\u0443\u0444\u0435\u0440\u0430 \u043E\u0431\u043C\u0435\u043D\u0430"),U&&t.createElement(d.nv,{variant:"outlined",fullWidth:!0,label:"\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435",onChange:ae,inputRef:I,style:{margin:"15px 0 10px",display:D?"none":"inline-flex"}}),t.createElement("button",{className:E.MediaControlsAdd,type:"button",disabled:!F,onClick:()=>{J(D?Y.current.value:P?k.current.value:y,D,P,O,y,y),K(),R("")}},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C"))),y.length>0&&t.createElement(d.xu,{flex:"column center"},t.createElement("img",{className:E.ResponsiveImage,src:y,alt:"a"})))},le=null},90972:(V,H,e)=>{e.r(H),e.d(H,{default:()=>ue});var t=e(22142),M=e(11314),v=e(63193),d=e(43118),r=e(42405),E=e(76358),a=e(12397);const u={Wrapper:"Wrapper___3vJPO",Grid:"Grid___1qOnc",RecordRow:"RecordRow___1nM4t",RecordDescr:"RecordDescr___2v1NM",Checkbox:"Checkbox___1ba00",Textarea:"Textarea___1tBsR",MediaMenu:"MediaMenu___1tlyu",MediaMenuGrid:"MediaMenuGrid___oU7it",MediaMenuControls:"MediaMenuControls___sctjD",MediaMenuPaste:"MediaMenuPaste___OwbIX",MediaMenuAdd:"MediaMenuAdd___2E_Hs",ResponsiveImage:"ResponsiveImage___1_9_Z",ParticipantMenu:"ParticipantMenu___mBgGM",Hidden:"Hidden___1omZb"};var le=Object.defineProperty,J=Object.prototype.hasOwnProperty,_=Object.getOwnPropertySymbols,Z=Object.prototype.propertyIsEnumerable,U=(o,l,f)=>l in o?le(o,l,{enumerable:!0,configurable:!0,writable:!0,value:f}):o[l]=f,y=(o,l)=>{for(var f in l||(l={}))J.call(l,f)&&U(o,f,l[f]);if(_)for(var f of _(l))Z.call(l,f)&&U(o,f,l[f]);return o};const R=(0,M.Pi)(({record:o,editable:l,organization:f})=>{if(!o)return null;const b=(0,r.FM)(o,(s,m)=>s==="id"?m<0?"":(0,r.Bu)(m,8):m),h=(0,r.Co)(f);return t.createElement("div",{className:u.Grid},t.createElement(d.Card,{flex:"column top left"},t.createElement("div",{className:u.RecordRow},t.createElement(a.nv,y({variant:"outlined",fullWidth:!0,label:"\u2116 \u0434\u0435\u043B\u0430 (\u0437\u0430\u043F\u043E\u043B\u043D\u044F\u0435\u0442\u0441\u044F \u0441\u0438\u0441\u0442\u0435\u043C\u043E\u0439)",readOnly:!0},b("id",!0))),t.createElement(a.nv,y({variant:"outlined",fullWidth:!0,label:"\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435"},b("title",!l)))),t.createElement("div",{className:u.RecordRow},t.createElement(a.Ph,y({name:"category",options:h,label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",fullWidth:!0},b("category",!l)))),t.createElement("div",{className:u.RecordRow},t.createElement(a.nv,y({variant:"outlined",fullWidth:!0,label:f==="police"?"\u0420\u0430\u0441\u0441\u043B\u0435\u0434\u0443\u0435\u0442":"\u041E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043D\u043D\u044B\u0439"},b("responsible",!l))),t.createElement("label",{className:u.Checkbox,htmlFor:"check"},t.createElement("input",{type:"checkbox",name:"check",checked:o.isArchived,onChange:s=>{o.isArchived=s.target.checked}}),"\u0410\u0440\u0445\u0438\u0432"))),t.createElement(d.Card,{header:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u0434\u0435\u043B\u0430"},t.createElement("textarea",y({rows:16,className:u.Textarea},b("description",!l)))))});var O=e(38481),ne=e(68999);function D(o){return{id:-2,isArchived:!1,organization:o,title:"",category:o==="ambulance"?ne.RecordCategoryAmbulance.Reception:ne.RecordCategoryPolice.Administrative,responsible:"",description:"",date:new Date,participants:[],violations:[],media:[]}}const $=null;var P=Object.defineProperty,A=Object.prototype.hasOwnProperty,F=Object.getOwnPropertyDescriptor,G=Object.getOwnPropertySymbols,Y=Object.prototype.propertyIsEnumerable,Q=(o,l,f)=>l in o?P(o,l,{enumerable:!0,configurable:!0,writable:!0,value:f}):o[l]=f,k=(o,l)=>{for(var f in l||(l={}))A.call(l,f)&&Q(o,f,l[f]);if(G)for(var f of G(l))Y.call(l,f)&&Q(o,f,l[f]);return o},I=(o,l,f,b)=>{for(var h=b>1?void 0:b?F(l,f):l,s=o.length-1,m;s>=0;s--)(m=o[s])&&(h=(b?m(l,f,h):m(h))||h);return b&&h&&P(l,f,h),h},x=(o,l,f)=>new Promise((b,h)=>{var s=j=>{try{W(f.next(j))}catch(w){h(w)}},m=j=>{try{W(f.throw(j))}catch(w){h(w)}},W=j=>j.done?b(j.value):Promise.resolve(j.value).then(s,m);W((f=f.apply(o,l)).next())});class N{constructor(){this.organization="ambulance",this.assets={},this.RecordData=null,this.currentMedia={},this.hasRecordArchived=!1,this.isMediaMenuOpen=!1,this.isParticipantsMenuOpen=!0,this.isViolationsMenuOpen=!0,this.LawArticles=null,this.fetchRecordData=l=>x(this,null,function*(){return l==-1?(this.RecordData=k({},D(this.organization)),this.organization==="police"&&(this.isMediaMenuOpen=!0),new Promise(f=>{f(!0)})):r.bl.query("cad/record/get",{id:l}).then(f=>(this.RecordData=k({},f.data),this.isParticipantsMenuOpen=!this.RecordData.participants||this.RecordData.participants.length===0,this.isMediaMenuOpen=!this.RecordData.media||this.RecordData.media.length==0,this.isViolationsMenuOpen=!this.RecordData.violations||this.RecordData.violations.length===0,this.hasRecordArchived=this.RecordData.isArchived,f))}),this.onSlideChange=l=>{this.currentMedia=k({},this.RecordData.media[l])},this.onViolationRemove=l=>{const f=this.RecordData.violations.find(h=>h.lastname===l.lastname&&h.firstname===l.firstname&&h.lawId===l.lawId);if(!f)return!1;const b=this.RecordData.violations.indexOf(f);return b!==-1&&this.RecordData.violations.splice(b,1),this.RecordData.violations.length===0&&(this.isViolationsMenuOpen=!0),!0},this.onViolationAdd=(l,f,b,h,s)=>l.length===0||f.length===0?((0,r.ZK)("\u041D\u0435 \u0437\u0430\u0434\u0430\u043D\u044B \u0438\u043C\u044F \u0438 \u0444\u0430\u043C\u0438\u043B\u0438\u044F \u043F\u0440\u0430\u0432\u043E\u043D\u0430\u0440\u0443\u0448\u0438\u0442\u0435\u043B\u044F!"),!1):b<0?((0,r.ZK)("\u041D\u0435 \u0432\u044B\u0431\u0440\u0430\u043D\u0430 \u0441\u0442\u0430\u0442\u044C\u044F \u0437\u0430\u043A\u043E\u043D\u0430!"),!1):(this.RecordData.violations.push({id:-1,firstname:l,lastname:f,recordId:this.RecordData.id,lawId:b,fineAmount:h,detentionAmount:s,closed:!1}),this.isViolationsMenuOpen=!1,!0),this.onMediaAdd=(l,f,b,h,s,m)=>x(this,null,function*(){this.RecordData.media.push({isVideo:f,isClip:b,src:l,caption:h,original:s,thumbnail:m}),this.sliderInstance?this.sliderInstance.slideToIndex(this.RecordData.media.length):this.currentMedia={isVideo:f,isClip:b,src:l,caption:h,original:s,thumbnail:m},this.isMediaMenuOpen=!1}),this.deleteMedia=l=>{const f=this.RecordData.media.find(h=>h.src===l.src);if(!f)return!1;const b=this.RecordData.media.indexOf(f);return b>=0&&this.RecordData.media.splice(b,1),!0},this.onMediaDelete=()=>{if(this.RecordData.media.length>0){const l=this.sliderInstance.getCurrentIndex();this.RecordData.media.length===1?this.deleteMedia(this.RecordData.media[0]):this.deleteMedia(this.currentMedia),this.sliderInstance.slideToIndex(l-1)}this.RecordData.media.length===0&&(this.isMediaMenuOpen=!0)},this.onParticipantAdd=(l,f,b)=>{b!==-1&&l.length>0&&f.length>0&&(this.RecordData.participants.push({firstname:l,lastname:f,category:b}),this.isParticipantsMenuOpen=!1)},this.onParticipantRemove=l=>{const{lastname:f,firstname:b,category:h}=l,s=this.RecordData.participants.find(m=>{const{lastname:W,firstname:j,category:w}=m;return w===h&&j===b&&W===f});s&&this.RecordData.participants.splice(this.RecordData.participants.indexOf(s),1),this.RecordData.participants.length===0&&(this.isParticipantsMenuOpen=!0)},this.saveRecord=()=>this.RecordData.id<0?r.bl.query("cad/record/create",{data:this.RecordData}):r.bl.query("cad/record/update",{id:this.RecordData.id,data:this.RecordData}),this.setOrganization=l=>{this.organization=l,this.RecordData=k({},D(this.organization))},this.setSliderInstance=l=>{this.sliderInstance=l},(0,O.ky)(this)}updateRecordData(l){this.assets.recordData=this.fetchRecordData(l)}updateLawArticles(){this.assets.lawArticles=r.bl.query("cad/laws/list",{}).then(l=>(this.LawArticles=[...l.data],l))}}I([O.LO],N.prototype,"organization",2),I([O.LO],N.prototype,"assets",2),I([O.LO],N.prototype,"RecordData",2),I([O.LO],N.prototype,"currentMedia",2),I([O.LO],N.prototype,"hasRecordArchived",2),I([O.LO],N.prototype,"isMediaMenuOpen",2),I([O.LO],N.prototype,"isParticipantsMenuOpen",2),I([O.LO],N.prototype,"isViolationsMenuOpen",2),I([O.LO],N.prototype,"LawArticles",2),I([O.aD],N.prototype,"fetchRecordData",2),I([O.aD],N.prototype,"updateRecordData",1),I([O.aD],N.prototype,"updateLawArticles",1),I([O.aD],N.prototype,"onSlideChange",2),I([O.aD],N.prototype,"onViolationRemove",2),I([O.aD],N.prototype,"onViolationAdd",2),I([O.aD],N.prototype,"onMediaAdd",2),I([O.aD],N.prototype,"deleteMedia",2),I([O.aD],N.prototype,"onMediaDelete",2),I([O.aD],N.prototype,"onParticipantAdd",2),I([O.aD],N.prototype,"onParticipantRemove",2),I([O.aD],N.prototype,"saveRecord",2),I([O.aD],N.prototype,"setOrganization",2),I([O.aD],N.prototype,"setSliderInstance",2);const p=new N;var ae=e(35979),ie=e.n(ae);const K=({participants:o,participantsRoles:l,editable:f,isParticipantsMenuOpen:b,onParticipantAdd:h,onParticipantRemove:s})=>{const[m,W]=(0,t.useState)(-1),[j,w]=(0,t.useState)(""),[ge,me]=(0,t.useState)("");return t.createElement(t.Fragment,null,!b&&t.createElement(ie(),{style:{width:"100%"},components:{Toolbar:()=>t.createElement("div",null)},columns:[{title:"\u0418\u043C\u044F",field:"name",render:ee=>t.createElement("p",{style:{margin:0}},`${ee.firstname} ${ee.lastname}`)},{title:"\u0420\u043E\u043B\u044C",field:"category",lookup:l.reduce((ee,Ce)=>(ee[Ce.value]=Ce.label,ee),{})}],localization:{header:{actions:""}},options:{draggable:!1,paging:!1,actionsColumnIndex:-1,padding:"dense"},data:o,actions:f?[{icon:()=>r.PJ.HighlightOff,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",onClick:(ee,Ce)=>s(Ce)}]:[]}),b&&t.createElement("div",{className:u.ParticipantMenu},t.createElement(a.nv,{variant:"outlined",fullWidth:!0,label:"\u0418\u043C\u044F",value:j,onChange:ee=>w(ee.target.value)}),t.createElement(a.nv,{variant:"outlined",fullWidth:!0,label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F",value:ge,onChange:ee=>me(ee.target.value)}),t.createElement(a.Ph,{name:"category",options:l,value:m,onChange:ee=>{W(ee.target.value)},style:{gridColumn:"1/-1"}}),t.createElement("button",{className:u.MediaMenuAdd,type:"button",style:{margin:0,gridColumn:"1/-1"},onClick:()=>{h(j,ge,m),w(""),me(""),W(-1)}},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C")))},L=({lawArticles:o,violations:l,editable:f,isViolationsMenuOpen:b,onViolationAdd:h,onViolationRemove:s})=>{const[m,W]=(0,t.useState)(-1),[j,w]=(0,t.useState)(""),[ge,me]=(0,t.useState)(""),[ee,Ce]=(0,t.useState)(0),[Ae,Ne]=(0,t.useState)(0),Re=()=>{const he=o==null?void 0:o.find(Me=>Me.id===m);return he?(ee<he.fineMin&&Ce(he.fineMin),ee>he.fineMax&&Ce(he.fineMax),Ae<he.detentionMin&&Ne(he.detentionMin),Ae>he.detentionMax&&Ne(he.detentionMax),he):null},xe=Re();return t.createElement(t.Fragment,null,!b&&t.createElement(ie(),{style:{width:"100%"},components:{Toolbar:()=>t.createElement("div",null)},columns:[{title:"\u0418\u043C\u044F",field:"name",render:he=>t.createElement("p",{style:{margin:0}},`${he.firstname} ${he.lastname}`)},{title:"\u0421\u0442\u0430\u0442\u044C\u044F",field:"lawId"},{title:"\u0428\u0442\u0440\u0430\u0444",field:"fineAmount"},{title:"\u0417\u0430\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435",field:"detentionAmount"},{title:"\u041F\u043E\u0433\u0430\u0448\u0435\u043D\u043E",field:"closed",lookup:{0:"\u043D\u0435\u0442",1:"\u0434\u0430",false:"\u043D\u0435\u0442",true:"\u0434\u0430"}}],localization:{header:{actions:""}},options:{draggable:!1,paging:!1,actionsColumnIndex:-1,padding:"dense"},data:l,actions:f?[{icon:()=>r.PJ.HighlightOff,tooltip:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",onClick:(he,Me)=>s(Me)}]:[]}),b&&t.createElement("div",{className:u.ParticipantMenu},t.createElement(a.nv,{variant:"outlined",fullWidth:!0,label:"\u0418\u043C\u044F",value:j,onChange:he=>w(he.target.value)}),t.createElement(a.nv,{variant:"outlined",fullWidth:!0,label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F",value:ge,onChange:he=>me(he.target.value)}),t.createElement(a.Ph,{name:"category",options:[{value:-1,label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u044C\u044E \u0437\u0430\u043A\u043E\u043D\u0430",hidden:!0},...o.map(he=>({value:he.id,label:he.description}))],value:m,onChange:he=>{W(+he.target.value),Re()},style:{gridColumn:"1/-1"}}),xe&&t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("span",null,"\u0428\u0442\u0440\u0430\u0444 $",ee),t.createElement(a.e6,{min:xe.fineMin,max:xe.fineMax,value:ee,onChange:he=>Ce(+he.target.value)})),t.createElement("div",null,t.createElement("span",null,"\u0417\u0430\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 ",Ae,"\u0441"),t.createElement(a.e6,{min:xe.detentionMin,max:xe.detentionMax,value:Ae,onChange:he=>Ne(+he.target.value)}))),t.createElement("button",{className:u.MediaMenuAdd,type:"button",style:{margin:0,gridColumn:"1/-1"},onClick:()=>{h(j,ge,m,ee,Ae)&&(w(""),me(""),W(-1))}},"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C")))},q=({editable:o})=>t.createElement(L,{lawArticles:p.LawArticles,violations:p.RecordData.violations,editable:o,isViolationsMenuOpen:p.isViolationsMenuOpen,onViolationAdd:p.onViolationAdd,onViolationRemove:p.onViolationRemove}),se=(0,M.Pi)(({editable:o,organization:l})=>{const f=(0,r.Vx)(l),b=()=>p.RecordData.participants.length===0||!o?[]:[{text:p.isParticipantsMenuOpen?"\u0421\u043A\u0440\u044B\u0442\u044C":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",icon:p.isParticipantsMenuOpen?r.PJ.RemoveCircleOutline:r.PJ.ControlPoint,onClick:()=>{p.isParticipantsMenuOpen=!p.isParticipantsMenuOpen}}],h=()=>p.RecordData.violations.length===0||!o?[]:[{text:p.isViolationsMenuOpen?"\u0421\u043A\u0440\u044B\u0442\u044C":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",icon:p.isViolationsMenuOpen?r.PJ.RemoveCircleOutline:r.PJ.ControlPoint,onClick:()=>{p.isViolationsMenuOpen=!p.isViolationsMenuOpen}}];return t.createElement("div",{className:u.Grid},t.createElement(d.Card,{elevation:0,header:t.createElement(d.CardHeader,{labelText:l==="police"?"\u0424\u0438\u0433\u0443\u0440\u0430\u043D\u0442\u044B":"\u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0438",actions:b()}),flex:"column top left"},p.RecordData.participants&&t.createElement(K,{participants:p.RecordData.participants,editable:o,participantsRoles:f,isParticipantsMenuOpen:p.isParticipantsMenuOpen,onParticipantAdd:p.onParticipantAdd,onParticipantRemove:p.onParticipantRemove})),l==="police"&&t.createElement(d.Card,{elevation:0,header:t.createElement(d.CardHeader,{labelText:"\u041F\u0440\u0430\u0432\u043E\u043D\u0430\u0440\u0443\u0448\u0435\u043D\u0438\u044F",actions:h()}),flex:"column top left"},t.createElement(d.Preloader,{event:p.assets.lawArticles,success:q,editable:o})))});var pe=e(81300),de=e(73496),oe=e(14471),X=e(73642);const c=o=>o.isVideo?(o.original=`https://img.youtube.com/vi/${o.src}/0.jpg`,o.thumbnail=`https://img.youtube.com/vi/${o.src}/0.jpg`,t.createElement("div",{className:"slider-figure"},t.createElement(de.Z,{videoId:o.src,opts:{height:"650px",width:"100%",playerVars:{controls:1,rel:0,showinfo:0,disablekb:1,modestbranding:1}}}))):o.isClip?(r.BE.get(`https://api.twitch.tv/kraken/clips/${o.src}`).then(l=>{o.original=l.data.thumbnails.medium,o.thumbnail=l.data.thumbnails.small}).catch(l=>{(0,r.vU)(`\u0417\u0430\u0433\u0443\u0436\u0435\u043D \u043D\u0435\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u043C\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043B! \u041E\u0448\u0438\u0431\u043A\u0430: ${l}`)}),t.createElement("div",{className:"slider-figure"},t.createElement(oe.Nh,{muted:!0,autoplay:!1,allowFullScreen:!1,width:"100%",height:"650px",clip:`${o.src}&parent=http://react_cad`,parent:["http://react_cad"]}))):(o.original=o.src,o.thumbnail=o.src,t.createElement("figure",{className:"slider-figure"},t.createElement("img",{className:"slider-img",src:o.src,alt:o.caption||o.src,onError:()=>{o.src="assets/img/loader.gif"}}),o.caption.length>0&&t.createElement("figcaption",{className:"slider-caption"},o.caption))),S=(0,M.Pi)(({editable:o})=>{const l=(0,t.useRef)(),f=()=>{if(p.RecordData.media.length===0||!o)return[];const b=[];return b.push({text:p.isMediaMenuOpen?"\u0421\u043A\u0440\u044B\u0442\u044C":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C",icon:p.isMediaMenuOpen?r.PJ.RemoveCircleOutline:r.PJ.ControlPoint,onClick:()=>{p.isMediaMenuOpen=!p.isMediaMenuOpen}}),p.isMediaMenuOpen||b.push({text:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C",icon:r.PJ.HighlightOff,onClick:()=>p.onMediaDelete()}),b};return(0,t.useEffect)(()=>{l.current&&!p.sliderInstance&&(p.setSliderInstance(l.current),p.sliderInstance.slideToIndex(0),p.onSlideChange(0))},[p.RecordData.media.length]),t.createElement(d.Card,{header:t.createElement(d.CardHeader,{labelText:"\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B \u0434\u0435\u043B\u0430",actions:f()})},p.RecordData.media.length>0&&t.createElement(pe.Z,{items:p.RecordData.media,renderItem:c,thumbnailPosition:"right",additionalClass:p.isMediaMenuOpen?u.Hidden:"gallery-container",showFullscreenButton:!1,showPlayButton:!1,onSlide:p.onSlideChange,ref:l}),t.createElement("div",{className:p.isMediaMenuOpen?u.MediaMenu:u.Hidden},t.createElement(X.j,{onMediaAdd:p.onMediaAdd,hasDescription:!0,hasVideo:!0,hasClip:!0})))});var T=(o,l,f)=>new Promise((b,h)=>{var s=j=>{try{W(f.next(j))}catch(w){h(w)}},m=j=>{try{W(f.throw(j))}catch(w){h(w)}},W=j=>j.done?b(j.value):Promise.resolve(j.value).then(s,m);W((f=f.apply(o,l)).next())});const C=o=>{const{id:l,editable:f,action:b}=o,h={text:"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C",icon:r.PJ.Save,onClick:b};return t.createElement(d.CardHeader,{labelText:l==="-1"?"\u041D\u043E\u0432\u043E\u0435 \u0434\u0435\u043B\u043E":`\u0414\u0435\u043B\u043E \u2116${l}`,actions:f?[h]:[]})},z=({recordId:o,organization:l})=>{var f,b,h;const s=E.Z.permissions[l],m=(0,v.k6)(),W=((b=(f=s==null?void 0:s.cases)==null?void 0:f.edit)==null?void 0:b.archive)||((h=s==null?void 0:s.cases)==null?void 0:h.edit)&&!p.hasRecordArchived,j=()=>{p.saveRecord().then(w=>T(void 0,null,function*(){w.data.insertId!==0?(yield m.replace(`/${l}/record/${w.data.insertId}`),(0,r.Vp)("\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043E!")):(0,r.Vp)(`\u0423\u0441\u043F\u0435\u0448\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E \u0434\u0435\u043B\u043E \u2116${o}!`)})).catch(w=>{(0,r.vU)(`\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F! ${w}`)})};return t.createElement(d.Card,{flex:"column top left",elevation:0,header:t.createElement(C,{id:o,editable:W,action:j})},t.createElement(d.Tabs,null,t.createElement(R,{key:"\u041E\u0441\u043D\u043E\u0432\u043D\u0430\u044F \u0438\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F",record:p.RecordData,editable:W,organization:l}),t.createElement(se,{key:l==="police"?"\u0424\u0438\u0433\u0443\u0440\u0430\u043D\u0442\u044B":"\u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0438",editable:W,organization:l}),l==="police"&&t.createElement(S,{key:"\u041C\u0430\u0442\u0435\u0440\u0438\u0430\u043B\u044B",editable:W})))},ue=(0,M.Pi)(({id:o,organization:l})=>((0,t.useEffect)(()=>{p.setOrganization(l),p.updateRecordData(o),p.updateLawArticles()},[o,l]),t.createElement("div",{className:u.Wrapper},t.createElement(d.Preloader,{event:p.assets.recordData,success:z,recordId:o,organization:l}))))},90137:(V,H,e)=>{e.r(H),e.d(H,{default:()=>Q});var t=e(22142),M=e(11314),v=e(63193),d=e(35979),r=e.n(d),E=e(43118),a=e(12397),u=e(42405),le=e(76358),J=e(38481),_=e(68999),Z=Object.defineProperty,U=Object.getOwnPropertyDescriptor,y=(k,I,x,N)=>{for(var p=N>1?void 0:N?U(I,x):I,ae=k.length-1,ie;ae>=0;ae--)(ie=k[ae])&&(p=(N?ie(I,x,p):ie(p))||p);return N&&p&&Z(I,x,p),p};class R{constructor(){this.Persons=null,this.firstname="",this.lastname="",this.phone="",this.onSearch=I=>u.bl.query("cad/person/search",{firstname:this.firstname,lastname:this.lastname,phone:this.phone}).then(x=>{const N=x.data;return I==="ambulance"&&N.forEach(p=>{p.status!==_.PersonStatus.Dead&&(p.status=_.PersonStatus.Alive)}),this.Persons=N,!0}).catch(x=>((0,u.vU)(`\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u0438\u0441\u043A\u0430! ${x}`),!1)),(0,J.ky)(this)}}y([J.LO],R.prototype,"Persons",2),y([J.LO],R.prototype,"firstname",2),y([J.LO],R.prototype,"lastname",2),y([J.LO],R.prototype,"phone",2),y([J.aD],R.prototype,"onSearch",2);const O=new R,ne={Wrapper:"Wrapper___3W0Hf",SearchBox:"SearchBox___33i_t",SearchButton:"SearchButton___3L9v3",NewWrapper:"NewWrapper___9K-uN",NewButton:"NewButton___943Jy"};var D=Object.defineProperty,$=Object.prototype.hasOwnProperty,P=Object.getOwnPropertySymbols,A=Object.prototype.propertyIsEnumerable,F=(k,I,x)=>I in k?D(k,I,{enumerable:!0,configurable:!0,writable:!0,value:x}):k[I]=x,G=(k,I)=>{for(var x in I||(I={}))$.call(I,x)&&F(k,x,I[x]);if(P)for(var x of P(I))A.call(I,x)&&F(k,x,I[x]);return k};const Q=(0,M.Pi)(k=>{const I=(0,v.k6)(),{orgName:x}=k,N=(0,u.aP)(x),p=le.Z.permissions[x]||{};return t.createElement("div",{className:ne.Wrapper},t.createElement(E.Card,{header:"\u041F\u043E\u0438\u0441\u043A",flex:"column top left"},t.createElement("div",{className:ne.SearchBox},t.createElement(a.nv,{variant:"outlined",id:"name",fullWidth:!0,label:"\u0418\u043C\u044F",value:O.firstname,onChange:ae=>{O.firstname=ae.target.value}}),t.createElement(a.nv,{variant:"outlined",id:"lastname",fullWidth:!0,label:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F",value:O.lastname,onChange:ae=>{O.lastname=ae.target.value}}),t.createElement(a.nv,{variant:"outlined",id:"phone",fullWidth:!0,label:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",value:O.phone,onChange:ae=>{O.phone=ae.target.value}}),t.createElement("button",{className:ne.SearchButton,type:"button",onClick:()=>O.onSearch(x)},"\u041F\u043E\u0438\u0441\u043A"))),t.createElement(E.Card,{header:"\u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442\u044B \u043F\u043E\u0438\u0441\u043A\u0430",flex:"column top left"},t.createElement(r(),{style:{width:"100%"},components:{Toolbar:()=>t.createElement("span",null),Body:ae=>{var ie,Ee,K;return((Ee=(ie=O)==null?void 0:ie.Persons)==null?void 0:Ee.length)>0||!((K=p==null?void 0:p.persons)==null?void 0:K.edit)?t.createElement(d.MTableBody,G({},ae)):t.createElement("tbody",null,t.createElement("tr",null,t.createElement("td",{colSpan:100},t.createElement(a.xu,{flex:"center",className:ne.NewWrapper},t.createElement("button",{type:"button",onClick:()=>I.push(`/${x}/person/-1`),className:ne.NewButton},u.PJ.ControlPoint,t.createElement("span",null,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043B\u0438\u0447\u043D\u043E\u0435 \u0434\u0435\u043B\u043E"))))))}},columns:[{title:"Person ID",field:"id",hidden:!0},{title:"\u0418\u043C\u044F",field:"firstname"},{title:"\u0424\u0430\u043C\u0438\u043B\u0438\u044F",field:"lastname"},{title:"\u041F\u043E\u043B",field:"sex",lookup:(0,u.tD)().reduce((ae,ie)=>(ae[ie.value]=ie.label,ae),{})},{title:"\u0412\u043E\u0437\u0440\u0430\u0441\u0442",field:"age"},{title:"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0430",field:"phone"},{title:"\u0421\u0442\u0430\u0442\u0443\u0441",field:"status",lookup:N}],data:O.Persons||[],options:{draggable:!1,pageSize:10,pageSizeOptions:[10],thirdSortClick:!1,padding:"dense"},onRowClick:(ae,ie)=>I.push(`/${x}/person/${ie.id}`)})))})},76358:(V,H,e)=>{e.d(H,{Z:()=>E});var t=e(38481),M=Object.defineProperty,v=Object.getOwnPropertyDescriptor,d=(u,le,J,_)=>{for(var Z=_>1?void 0:_?v(le,J):le,U=u.length-1,y;U>=0;U--)(y=u[U])&&(Z=(_?y(le,J,Z):y(Z))||Z);return _&&Z&&M(le,J,Z),Z};class r{constructor(){this.shown=!1,this.photoMode=!1,this.Homepage="/",this.snackbar={open:!1,text:"",category:"info",actions:[]},this.permissionSets={":Governor":{ambulance:{manage:{leader:!0,employees:{edit:!1},grades:{edit:!1}}},police:{manage:{leader:!0,employees:{edit:!1},grades:{edit:!1}}},oil:{manage:{leader:!0,employees:{edit:!1},grades:{edit:!1}}},government:{certificates:{edit:!0},manage:{leader:!0,employees:{edit:!0},grades:{edit:!0}}}},":Ambulance Chief":{ambulance:{manage:{employees:{edit:!0},grades:{edit:!0}},cases:{edit:{archive:!0}},certificates:{edit:!0},persons:{edit:!0,remove:!0}}},":Police Chief":{police:{manage:{employees:{edit:!0},grades:{edit:!0}},cases:{edit:{archive:!0}},certificates:{edit:!0},persons:{edit:!0,remove:!0}}},":Officer":{police:{cases:{edit:{}},certificates:{edit:!0},persons:{edit:!0}}},":Cadet":{police:{cases:{},certificates:{},persons:{}}}},this.permissions=this.permissionSets[":Governor"],this.gasStations=[{brand:"Xero",title:"\u0417\u0430\u043F\u0440\u0430\u0432\u043A\u0430 \u043D\u0430 \u0428\u043E\u0441\u0441\u0435 \u0421\u0435\u043D\u043E\u0440\u0430",owner:"\u0417\u0430 \u041F\u0440\u0430\u0432\u043A\u0430",volume:1e4,price:15},{brand:"Xero",title:"\u0417\u0430\u043F\u0440\u0430\u0432\u043A\u0430 \u043D\u0430 \u041C\u0430\u0440\u0438\u043D\u0430-\u0434\u0440\u0430\u0439\u0432",owner:"\u0411\u0438\u0431\u0438\u043D\u0430 \u0411\u0443\u0431\u0430",volume:950,price:15},{brand:"RON",title:"\u0417\u0430\u043F\u0440\u0430\u0432\u043A\u0430 \u043D\u0430 C\u0435\u0432\u0435\u0440\u0435 \u0411\u0443\u043B\u044C\u0432\u0430\u0440\u0430 \u041F\u0430\u043B\u0435\u0442\u043E",owner:"\u0417\u0430 \u041F\u0440\u0430\u0432\u043A\u0430",volume:1e4,price:15},{brand:"RON",title:"\u0417\u0430\u043F\u0440\u0430\u0432\u043A\u0430 \u043D\u0430 \u0417\u0430\u043F\u0430\u0434\u043D\u043E\u043C \u0428\u043E\u0441\u0441\u0435 \u0414\u0435\u043B\u044C-\u041F\u0435\u0440\u0440\u043E",owner:"\u0411\u0438\u0431\u0438\u043D\u0430 \u0411\u0443\u0431\u0430",volume:950,price:15},{brand:"Globe Oil",title:"\u0417\u0430\u043F\u0440\u0430\u0432\u043A\u0430 \u043D\u0430 \u041A\u0430\u043B\u0435-\u0430\u0432\u0435\u043D\u044E",owner:"\u041D\u0435",volume:1e4,price:15},{brand:"Globe Oil",title:"\u041E\u0447\u043A\u0430 \u0417\u0430\u043F\u0440\u0430\u0432",owner:"\u0411\u0438\u0431\u0438\u043D\u0430 \u0411\u0443\u0431\u0430",volume:950,price:15},{brand:"LTD",title:"\u0417\u0430\u043F\u0440\u0430\u0432 \u041E\u0447\u043A\u0430",owner:"\u0417\u0430 \u041F\u0440\u0430\u0432\u043A\u0430",volume:1e4,price:15},{brand:"LTD",title:"\u041E\u0447\u043A\u0430 \u0417\u0430\u043F\u0440\u0430\u0432",owner:"\u0411\u0438\u0431\u0438\u043D\u0430 \u0411\u0443\u0431\u0430",volume:950,price:15}],this.tax={},(0,t.ky)(this)}}d([t.LO],r.prototype,"shown",2),d([t.LO],r.prototype,"photoMode",2),d([t.LO],r.prototype,"onPhotoHandler",2),d([t.LO],r.prototype,"Homepage",2),d([t.LO],r.prototype,"snackbar",2),d([t.LO],r.prototype,"permissionSets",2),d([t.LO],r.prototype,"permissions",2),d([t.LO],r.prototype,"gasStations",2),d([t.LO],r.prototype,"tax",2);const E=new r;var a=null},68999:(V,H,e)=>{e.r(H),e.d(H,{RecordCategoryPolice:()=>t,RecordCategoryAmbulance:()=>M,RecordParticipantCategoryPolice:()=>v,RecordParticipantCategoryAmbulance:()=>d,PersonSex:()=>r,PersonStatus:()=>E,CertificateCategory:()=>a});var t;(function(u){u[u.Administrative=0]="Administrative",u[u.Criminal=1]="Criminal"})(t||(t={}));var M;(function(u){u[u.Reception=0]="Reception",u[u.Certificate=1]="Certificate",u[u.Surgery=2]="Surgery"})(M||(M={}));var v;(function(u){u[u.Victim=0]="Victim",u[u.Witness=1]="Witness",u[u.Criminal=2]="Criminal",u[u.Officer=3]="Officer",u[u.Detective=4]="Detective"})(v||(v={}));var d;(function(u){u[u.Patient=0]="Patient",u[u.Assistant=1]="Assistant",u[u.Doctor=2]="Doctor"})(d||(d={}));var r;(function(u){u[u.Male=0]="Male",u[u.Female=1]="Female"})(r||(r={}));var E;(function(u){u[u.Alive=0]="Alive",u[u.Dead=1]="Dead",u[u.Missing=2]="Missing",u[u.Wanted=3]="Wanted",u[u.UnderInvestigation=4]="UnderInvestigation",u[u.Prison=5]="Prison"})(E||(E={}));var a;(function(u){u[u.IDCard=0]="IDCard",u[u.Document=1]="Document",u[u.Fine=2]="Fine",u[u.PassKey=3]="PassKey"})(a||(a={}))},51723:(V,H,e)=>{e.r(H),e.d(H,{Dead:()=>d,Alive:()=>r,Wanted:()=>E,UnderInvestigation:()=>a,Prison:()=>u,Missing:()=>le,PersonSex:()=>J,ConcatClasses:()=>_,minmax:()=>Z,formatMoney:()=>U,getPersonStatusLables:()=>y,getPersonSex:()=>R,zeroPad:()=>O,generateAsDataField:()=>ne,error:()=>D,warn:()=>$,info:()=>P,success:()=>A,genRandomHistory:()=>F,getParticipantsRoles:()=>G,getSelectCategories:()=>Y,wrapInAPIResponse:()=>Q,sleep:()=>k,useForceUpdate:()=>I});var t=e(22142),M=e(68999),v=e(76358);const{PersonStatus:{Dead:d,Alive:r,Wanted:E,UnderInvestigation:a,Prison:u,Missing:le},PersonSex:J}=M;function _(...x){const N=[];return x.forEach(p=>{if(p===void 0)throw new Error(`ClassName not defined! ${JSON.stringify(x)}`);p!==""&&p!==!1&&N.push(p)}),N.join(" ")}function Z(x,N,p){return Math.max(Math.min(x,p),N)}function U(x){return t.createElement(t.Fragment,null,"$",x.toLocaleString("ru-RU"))}function y(x,N){return x==="ambulance"?[{label:"\u0416\u0438\u0432(\u0430)",value:N!==d&&N!==r?N:r},{label:"\u041C\u0435\u0440\u0442\u0432(\u0430)",value:d}]:[{label:"\u0416\u0438\u0432(\u0430)",value:r},{label:"\u041C\u0435\u0440\u0442\u0432(\u0430)",value:d},{label:"\u0412 \u0440\u043E\u0437\u044B\u0441\u043A\u0435",value:E},{label:"\u041F\u0440\u043E\u043F\u0430\u0432\u0448\u0438\u0439(\u0430\u044F) \u0431\u0435\u0437 \u0432\u0435\u0441\u0442\u0438",value:le},{label:"\u041F\u043E\u0434 \u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u0435\u043C",value:a},{label:"\u0412 \u0442\u044E\u0440\u044C\u043C\u0435",value:u}]}function R(){return[{label:"\u041C",value:J.Male},{label:"\u0416",value:J.Female}]}const O=(x,N)=>String(x).padStart(N,"0"),ne=(x,N)=>(N||(N=(p,ae)=>ae),(p,ae)=>{const Ee={value:N(p,x[p])};return ae?Ee.readOnly=!0:Ee.onChange=K=>{x[p]=K.target.value},Ee});function D(x,N=3e3,p){v.Z.snackbar={open:!0,text:x,category:"error",actions:p},setTimeout(()=>{v.Z.snackbar.open=!1},N)}function $(x,N=3e3,p){v.Z.snackbar={open:!0,text:x,category:"warn",actions:p},setTimeout(()=>{v.Z.snackbar.open=!1},N)}function P(x,N=3e3,p){v.Z.snackbar={open:!0,text:x,category:"info",actions:p},setTimeout(()=>{v.Z.snackbar.open=!1},N)}function A(x,N=3e3,p){v.Z.snackbar={open:!0,text:x,category:"success",actions:p},setTimeout(()=>{v.Z.snackbar.open=!1},N)}function F(x,N){const p=[];let ae=x;const ie=new Date("2020-12-28");for(let Ee=1;Ee<90;Ee+=1)ae=ae+Math.ceil(Math.random()*N)-Math.ceil(Math.random()*N),ie.setDate(ie.getDate()-1),p.push({t:new Date(ie),y:ae});return p}const G=x=>x==="police"?[{label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043E\u043B\u044C \u0444\u0438\u0433\u0443\u0440\u0430\u043D\u0442\u0430",value:-1,hidden:!0},{label:"\u0416\u0435\u0440\u0442\u0432\u0430",value:M.RecordParticipantCategoryPolice.Victim},{label:"\u0421\u0432\u0438\u0434\u0435\u0442\u0435\u043B\u044C",value:M.RecordParticipantCategoryPolice.Witness},{label:"\u041F\u043E\u0434\u043E\u0437\u0440\u0435\u0432\u0430\u0435\u043C\u044B\u0439",value:M.RecordParticipantCategoryPolice.Criminal},{label:"\u041E\u0444\u0438\u0446\u0435\u0440",value:M.RecordParticipantCategoryPolice.Officer},{label:"\u0414\u0435\u0442\u0435\u043A\u0442\u0438\u0432",value:M.RecordParticipantCategoryPolice.Detective}]:x==="ambulance"?[{label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043E\u043B\u044C \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430",value:-1,hidden:!0},{label:"\u041F\u0430\u0446\u0438\u0435\u043D\u0442",value:M.RecordParticipantCategoryAmbulance.Patient},{label:"\u0410\u0441\u0441\u0438\u0441\u0442\u0435\u043D\u0442",value:M.RecordParticipantCategoryAmbulance.Assistant},{label:"\u0414\u043E\u043A\u0442\u043E\u0440",value:M.RecordParticipantCategoryAmbulance.Doctor}]:[],Y=x=>x==="police"?[{label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",value:-1,hidden:!0},{label:"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u0438\u0432\u043D\u043E\u0435",value:M.RecordCategoryPolice.Administrative},{label:"\u0423\u0433\u043E\u043B\u043E\u0432\u043D\u043E\u0435",value:M.RecordCategoryPolice.Criminal}]:x==="ambulance"?[{label:"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u044E",value:-1,hidden:!0},{label:"\u041F\u0440\u0438\u0451\u043C",value:M.RecordCategoryAmbulance.Reception},{label:"\u0421\u043F\u0440\u0430\u0432\u043A\u0430",value:M.RecordCategoryAmbulance.Certificate},{label:"\u041E\u043F\u0435\u0440\u0430\u0446\u0438\u044F",value:M.RecordCategoryAmbulance.Surgery}]:[];function Q(x,N=200){return new Promise(p=>p({status:N,data:x}))}function k(x){return new Promise(N=>{setTimeout(N,x)})}const I=()=>{const[x,N]=(0,t.useState)(!1);return()=>N(!x)}},42405:(V,H,e)=>{e.d(H,{bl:()=>D,bi:()=>P,PJ:()=>se,BE:()=>de,vU:()=>v.error,lb:()=>v.formatMoney,FM:()=>v.generateAsDataField,Vx:()=>v.getParticipantsRoles,tD:()=>v.getPersonSex,Co:()=>v.getSelectCategories,um:()=>v.info,_v:()=>v.sleep,Vp:()=>v.success,NW:()=>v.useForceUpdate,aP:()=>oe.a,ZK:()=>v.warn,Bu:()=>v.zeroPad});var t=e(23247),M=e.n(t),v=e(51723),d=(X,c,S)=>{if(!c.has(X))throw TypeError("Cannot "+S)},r=(X,c,S)=>(d(X,c,"read from private field"),S?S.call(X):c.get(X)),E=(X,c,S,T)=>(d(X,c,"write to private field"),T?T.call(X,S):c.set(X,S),S),a=(X,c,S)=>new Promise((T,C)=>{var z=o=>{try{ue(S.next(o))}catch(l){C(l)}},ce=o=>{try{ue(S.throw(o))}catch(l){C(l)}},ue=o=>o.done?T(o.value):Promise.resolve(o.value).then(z,ce);ue((S=S.apply(X,c)).next())}),u;class le{constructor(c){u.set(this,void 0),E(this,u,axios.create({baseURL:c,responseType:"json",timeout:1e3}))}static responseError(c,S){return a(this,null,function*(){return{status:c,data:S}})}query(c,S){return a(this,null,function*(){switch(yield sleep(100+Math.random()*100),c){case"organizations/budget/get":return this.getBudget(S.name);case"saveRecord":return this.saveRecord(S);case"cad/person/delte":return this.deletePerson(S.id);case"takePhotoStart":return this.takePhotoStart();case"takePhotoEnd":return this.takePhotoEnd();default:return this.dbPost(c,S)}})}takePhotoStart(){return wrapInAPIResponse("assets/img/face.jpg")}takePhotoEnd(){return wrapInAPIResponse("assets/img/face.jpg")}getLaws(){return a(this,null,function*(){return this.dbPost("cad/laws/list",{})})}getCertificate(c){return a(this,null,function*(){const S=yield this.dbPost("certificates/get",{id:c});return S.status!==200||(S.data=S.data[0]),S})}getCertificates(){return a(this,null,function*(){const c=yield this.dbPost("certificates/list",{});return c.status!==200,c})}getTaxList(){return a(this,null,function*(){return this.dbPost("tax/getlist",{})})}getBudget(c){return a(this,null,function*(){return wrapInAPIResponse({budget:Math.floor(Math.random()*2e5)})})}jobsChangeGrade(c,S,T){return a(this,null,function*(){return this.dbPost("roles/update",{identifier:c,role:S,grade:T})})}jobsChangeSalary(c,S,T){return a(this,null,function*(){return this.dbPost("roles/grades/setsalary",{role:c,grade:S,salary:T})})}createPerson(c){return a(this,null,function*(){return this.dbPost("cad/person/create",c)})}updatePerson(c){return a(this,null,function*(){return this.dbPost("cad/person/update",c)})}closeViolation(c){return a(this,null,function*(){return this.dbPost("cad/violations/close",{id:c})})}createViolation(c,S,T,C,z,ce,ue){return a(this,null,function*(){return this.dbPost("cad/violations/create",{firstname:c,lastname:S,recordId:T,lawId:C,fineAmount:z,detentionAmount:ce,closed:ue})})}getRecordsByName(c,S,T){return a(this,null,function*(){return this.dbPost("cad/participants/byname",{organization:c,firstname:S,lastname:T})})}getEmployees(c,S){return a(this,null,function*(){return this.dbPost("roles/get",{role:c,identifier:S})})}getGrades(c){return a(this,null,function*(){return this.dbPost("roles/grades/get",{role:c})})}dbPost(c,S){return a(this,null,function*(){return r(this,u).post(c,S)})}getRecord(c){return a(this,null,function*(){const S=yield this.dbPost("cad/record/get",{id:c});return S.status!==200||(S.data=S.data[0]),S})}getRecords(c,S){return a(this,null,function*(){const T=yield this.dbPost("cad/record/list",{archived:c?1:0,organization:S});return T.status!==200,T})}saveRecord(c){return a(this,null,function*(){return c.id<0?yield this.dbPost("cad/record/create",{data:c}):yield this.dbPost("cad/record/update",{id:c.id,data:c})})}searchPerson(c,S,T,C){return a(this,null,function*(){return yield this.dbPost("cad/person/search",{firstname:c,lastname:S,phone:T,status:C})})}deletePerson(c){return a(this,null,function*(){return yield this.dbPost("cad/person/delete",{id:c})})}getPerson(c){return a(this,null,function*(){return yield this.dbPost("cad/person/get",{id:c})})}}u=new WeakMap;const J=null,_=null;var Z=(X,c,S)=>{if(!c.has(X))throw TypeError("Cannot "+S)},U=(X,c,S)=>(Z(X,c,"read from private field"),S?S.call(X):c.get(X)),y=(X,c,S,T)=>(Z(X,c,"write to private field"),T?T.call(X,S):c.set(X,S),S),R,O;class ne{constructor(c){R.set(this,void 0),O.set(this,void 0),y(this,R,M().create({baseURL:c,responseType:"json",timeout:1e4}))}query(c,S){return U(this,R).post("query_api",{cmd:c,args:S})}getBudgetHistory(c){return this.query("stats/budget",{identifier:c}).then(S=>S.data.map(T=>({t:new Date(T.date),y:T.amount})))}}R=new WeakMap,O=new WeakMap;const D=new ne("http://react_cad/"),$=null;function P(X){window.addEventListener("message",c=>{const{data:S}=c;X(S)})}const A=null;var F=e(22142),G=e(18545),Y=e(85291),Q=e(7428),k=e(1001),I=e(9245),x=e(16879),N=e(26234),p=e(38086),ae=e(21791),ie=e(14700),Ee=e(91359),K=e(82518),B=e(87292),L=e(67487),q=e(95314);const se={Save:F.createElement(G.Z,null),ControlPoint:F.createElement(Y.Z,null),RemoveCircleOutline:F.createElement(Q.Z,null),HighlightOff:F.createElement(k.Z,null),KeyboardReturn:F.createElement(I.Z,null),Manage:F.createElement(x.Z,null),NewCase:F.createElement(N.Z,null),Persons:F.createElement(p.Z,null),Search:F.createElement(ae.Z,null),Dashboard:F.createElement(ie.Z,null),Cases:F.createElement(Ee.Z,null),Archive:F.createElement(K.Z,null),GasStation:F.createElement(B.Z,null),Tax:F.createElement(L.Z,null),Prize:F.createElement(q.Z,null)},pe=null,de=M().create({headers:{Accept:"application/vnd.twitchtv.v5+json","Client-ID":"vtqxrx00jh946qycue9mpi047sfsrs"}});var oe=e(37437)},37437:(V,H,e)=>{e.d(H,{a:()=>d});var t=e(22142),M=e(51723),v=(E,a,u)=>new Promise((le,J)=>{var _=y=>{try{U(u.next(y))}catch(R){J(R)}},Z=y=>{try{U(u.throw(y))}catch(R){J(R)}},U=y=>y.done?le(y.value):Promise.resolve(y.value).then(_,Z);U((u=u.apply(E,a)).next())});const d=(E,a=!1,u=0)=>{if(!a){const[_,Z]=(0,t.useState)({});return(0,t.useEffect)(()=>{(()=>v(void 0,null,function*(){const y=(0,M.getPersonStatusLables)(E,u).reduce((R,O)=>(R[O.value]=O.label,R),{});Z(y)}))()},[u,E]),_}const[le,J]=(0,t.useState)([]);return(0,t.useEffect)(()=>{J((0,M.getPersonStatusLables)())},[]),le};var r=null},31899:(V,H,e)=>{e.r(H),e.d(H,{default:()=>le});var t=e(22142),M=e(11314),v=e(35979),d=e.n(v),r=e(12397),E=e(76358);const a={Content:"Content___290h-",HideInnerScrollbar:"HideInnerScrollbar___1iMPF"},u=()=>t.createElement("div",{className:a.Content},t.createElement(r.xu,{className:a.HideInnerScrollbar},t.createElement(d(),{title:"\u0417\u0430\u043F\u0440\u0430\u0432\u043E\u0447\u043D\u044B\u0435 \u0441\u0442\u0430\u043D\u0446\u0438\u0438",components:{Groupbar:()=>""},columns:[{title:"\u0411\u0440\u0435\u043D\u0434",field:"brand",defaultGroupOrder:0},{title:"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435",field:"title"},{title:"\u0412\u043B\u0430\u0434\u0435\u043B\u0435\u0446",field:"owner"},{title:"\u0426\u0435\u043D\u0430",field:"price"},{title:"\u041E\u0431\u044A\u0435\u043C",field:"volume"}],options:{draggable:!1,paging:!1,grouping:!0,padding:"dense"},data:E.Z.gasStations}))),le=(0,M.Pi)(u)},35958:(V,H,e)=>{e.r(H),e.d(H,{default:()=>y});var t=e(22142),M=e(11314),v=e(12397),d=e(43118);const r={taxHead:"taxHead___1h7qj",taxButtonWrapper:"taxButtonWrapper___2LMVE",taxContent:"taxContent___3sC7f",taxChart:"taxChart___171dh",DashboardTaxCard:"DashboardTaxCard___ldxQ1"};var E=e(38481),a=e(42405),u=Object.defineProperty,le=Object.getOwnPropertyDescriptor,J=(R,O,ne,D)=>{for(var $=D>1?void 0:D?le(O,ne):O,P=R.length-1,A;P>=0;P--)(A=R[P])&&($=(D?A(O,ne,$):A($))||$);return D&&$&&u(O,ne,$),$};class _{constructor(){this.tax=[],this.setTaxAmount=(O,ne)=>{const D=this.tax.find($=>$.name===ne);D&&(D.amount=O)},this.getTaxList=()=>a.bl.query("getTaxList",{}).then(O=>O.status!==200?((0,a.vU)("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0434\u0430\u043D\u043D\u044B\u0445!"),!1):(this.tax=O.data,!0)),(0,E.ky)(this)}}J([E.LO],_.prototype,"tax",2),J([E.aD],_.prototype,"setTaxAmount",2),J([E.aD],_.prototype,"getTaxList",2);const Z=_;function U(){const[R]=(0,t.useState)(()=>new Z),[O]=(0,t.useState)(()=>R.getTaxList()),ne=($,P)=>{const A=parseInt($.target.value,10);R.setTaxAmount(A,P)};function D($){return $.map(A=>({label:A.label,data:[],fill:!1,backgroundColor:A.color,borderColor:A.color}))}return console.log("dataset",D(R.tax)),t.createElement("div",{className:r.taxContent},t.createElement(d.Card,{header:"\u041D\u0430\u043B\u043E\u0433\u0438",className:r.DashboardTax,flex:"column top center"},t.createElement(v.xu,{elevation:"0",className:r.DashboardTaxCard},t.createElement("span",null,"\u0422\u0438\u043F \u043D\u0430\u043B\u043E\u0433\u0430"),t.createElement("span",null,"% \u0441\u0442\u0430\u0432\u043A\u0430")),t.createElement(d.Preloader,{event:O},R.tax.map($=>t.createElement(v.xu,{key:$.name,className:r.DashboardTaxCard},t.createElement("div",{className:""},t.createElement("strong",null,t.createElement("p",null,$.label)),t.createElement("p",null,$.description)),t.createElement("div",{className:""},t.createElement(v.e6,{value:$.amount,min:0,max:50,style:{margin:"16px 0"},onChange:P=>{ne(P,$.name)}}),t.createElement("p",null,$.amount," %")))))),t.createElement(v.xu,{className:r.taxChart},t.createElement(d.Preloader,{event:O},t.createElement(d.BudgetChart,{data:D(R.tax),responsive:!0,maintainAspectRatio:!1}))))}const y=(0,M.Pi)(U)}},Le={};function ve(V){var H=Le[V];if(H!==void 0)return H.exports;var e=Le[V]={id:V,loaded:!1,exports:{}};return Ie[V].call(e.exports,e,e.exports,ve),e.loaded=!0,e.exports}ve.m=Ie,(()=>{var V=[];ve.O=(H,e,t,M)=>{if(e){M=M||0;for(var v=V.length;v>0&&V[v-1][2]>M;v--)V[v]=V[v-1];V[v]=[e,t,M];return}for(var d=Infinity,v=0;v<V.length;v++){for(var[e,t,M]=V[v],r=!0,E=0;E<e.length;E++)(M&!1||d>=M)&&Object.keys(ve.O).every(_=>ve.O[_](e[E]))?e.splice(E--,1):(r=!1,M<d&&(d=M));r&&(V.splice(v--,1),H=t())}return H}})(),(()=>{ve.n=V=>{var H=V&&V.__esModule?()=>V.default:()=>V;return ve.d(H,{a:H}),H}})(),(()=>{ve.d=(V,H)=>{for(var e in H)ve.o(H,e)&&!ve.o(V,e)&&Object.defineProperty(V,e,{enumerable:!0,get:H[e]})}})(),(()=>{ve.e=()=>Promise.resolve()})(),(()=>{ve.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(V){if(typeof window=="object")return window}}()})(),(()=>{ve.hmd=V=>(V=Object.create(V),V.children||(V.children=[]),Object.defineProperty(V,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+V.id)}}),V)})(),(()=>{ve.o=(V,H)=>Object.prototype.hasOwnProperty.call(V,H)})(),(()=>{ve.r=V=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(V,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(V,"__esModule",{value:!0})}})(),(()=>{ve.nmd=V=>(V.paths=[],V.children||(V.children=[]),V)})(),(()=>{var V={874:0};ve.O.j=t=>V[t]===0;var H=(t,M)=>{var[v,d,r]=M,E,a,u=0;for(E in d)ve.o(d,E)&&(ve.m[E]=d[E]);for(r&&r(ve),t&&t(M);u<v.length;u++)a=v[u],ve.o(V,a)&&V[a]&&V[a][0](),V[v[u]]=0;ve.O()},e=self.webpackChunkreact_cad=self.webpackChunkreact_cad||[];e.forEach(H.bind(null,0)),e.push=H.bind(null,e.push.bind(e))})();var Te=ve.O(void 0,[531,130,904,323,379,529,982,190,285,677,685,898,753,182,105,400,118,11,707,716,205,475,567,581,208,103,315,221,732,47,663,255,641,692,640,484,949,413,618,591],()=>ve(88874));Te=ve.O(Te)})();
